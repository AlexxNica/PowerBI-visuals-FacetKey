!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Facets=t()}}(function(){var t;return function e(t,n,i){function r(a,o){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(s)return s(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){},{}],2:[function(t,e,n){(function(t){function e(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(t){return r.exec(t).slice(1)};n.resolve=function(){for(var n="",r=!1,s=arguments.length-1;s>=-1&&!r;s--){var a=s>=0?arguments[s]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,r="/"===a.charAt(0))}return n=e(i(n.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+n||"."},n.normalize=function(t){var r=n.isAbsolute(t),s="/"===a(t,-1);return t=e(i(t.split("/"),function(t){return!!t}),!r).join("/"),t||r||(t="."),t&&s&&(t+="/"),(r?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(i(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function i(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var r=i(t.split("/")),s=i(e.split("/")),a=Math.min(r.length,s.length),o=a,l=0;a>l;l++)if(r[l]!==s[l]){o=l;break}for(var h=[],l=o;l<r.length;l++)h.push("..");return h=h.concat(s.slice(o)),h.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var e=s(t),n=e[0],i=e[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},n.basename=function(t,e){var n=s(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return s(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return 0>e&&(e=t.length+e),t.substr(e,n)}}).call(this,t("_process"))},{_process:3}],3:[function(t,e,n){function i(){c=!1,o.length?h=o.concat(h):u=-1,h.length&&r()}function r(){if(!c){var t=setTimeout(i);c=!0;for(var e=h.length;e;){for(o=h,h=[];++u<e;)o&&o[u].run();u=-1,e=h.length}o=null,c=!1,clearTimeout(t)}}function s(t,e){this.fun=t,this.array=e}function a(){}var o,l=e.exports={},h=[],c=!1,u=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new s(t,e)),1!==h.length||c||setTimeout(r,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=a,l.addListener=a,l.once=a,l.off=a,l.removeListener=a,l.removeAllListeners=a,l.emit=a,l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],4:[function(t,e,n){"use strict";function i(){var t=_();return t.compile=function(e,n){return c.compile(e,n,t)},t.precompile=function(e,n){return c.precompile(e,n,t)},t.AST=l["default"],t.Compiler=c.Compiler,t.JavaScriptCompiler=p["default"],t.Parser=h.parser,t.parse=h.parse,t}var r=function(t){return t&&t.__esModule?t:{"default":t}};n.__esModule=!0;var s=t("./handlebars.runtime"),a=r(s),o=t("./handlebars/compiler/ast"),l=r(o),h=t("./handlebars/compiler/base"),c=t("./handlebars/compiler/compiler"),u=t("./handlebars/compiler/javascript-compiler"),p=r(u),f=t("./handlebars/compiler/visitor"),d=r(f),g=t("./handlebars/no-conflict"),m=r(g),_=a["default"].create,v=i();v.create=i,m["default"](v),v.Visitor=d["default"],v["default"]=v,n["default"]=v,e.exports=n["default"]},{"./handlebars.runtime":5,"./handlebars/compiler/ast":7,"./handlebars/compiler/base":8,"./handlebars/compiler/compiler":10,"./handlebars/compiler/javascript-compiler":12,"./handlebars/compiler/visitor":15,"./handlebars/no-conflict":18}],5:[function(t,e,n){"use strict";function i(){var t=new a.HandlebarsEnvironment;return p.extend(t,a),t.SafeString=l["default"],t.Exception=c["default"],t.Utils=p,t.escapeExpression=p.escapeExpression,t.VM=d,t.template=function(e){return d.template(e,t)},t}var r=function(t){return t&&t.__esModule?t:{"default":t}};n.__esModule=!0;var s=t("./handlebars/base"),a=r(s),o=t("./handlebars/safe-string"),l=r(o),h=t("./handlebars/exception"),c=r(h),u=t("./handlebars/utils"),p=r(u),f=t("./handlebars/runtime"),d=r(f),g=t("./handlebars/no-conflict"),m=r(g),_=i();_.create=i,m["default"](_),_["default"]=_,n["default"]=_,e.exports=n["default"]},{"./handlebars/base":6,"./handlebars/exception":17,"./handlebars/no-conflict":18,"./handlebars/runtime":19,"./handlebars/safe-string":20,"./handlebars/utils":21}],6:[function(t,e,n){"use strict";function i(t,e){this.helpers=t||{},this.partials=e||{},r(this)}function r(t){t.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new c["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')}),t.registerHelper("blockHelperMissing",function(e,n){var i=n.inverse,r=n.fn;if(e===!0)return r(this);if(e===!1||null==e)return i(this);if(d(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):i(this);if(n.data&&n.ids){var a=s(n.data);a.contextPath=l.appendContextPath(n.data.contextPath,n.name),n={data:a}}return r(e,n)}),t.registerHelper("each",function(t,e){function n(e,n,r){h&&(h.key=e,h.index=n,h.first=0===n,h.last=!!r,u&&(h.contextPath=u+e)),o+=i(t[e],{data:h,blockParams:l.blockParams([t[e],e],[u+e,null])})}if(!e)throw new c["default"]("Must pass iterator to #each");var i=e.fn,r=e.inverse,a=0,o="",h=void 0,u=void 0;if(e.data&&e.ids&&(u=l.appendContextPath(e.data.contextPath,e.ids[0])+"."),g(t)&&(t=t.call(this)),e.data&&(h=s(e.data)),t&&"object"==typeof t)if(d(t))for(var p=t.length;p>a;a++)n(a,a,a===t.length-1);else{var f=void 0;for(var m in t)t.hasOwnProperty(m)&&(f&&n(f,a-1),f=m,a++);f&&n(f,a-1,!0)}return 0===a&&(o=r(this)),o}),t.registerHelper("if",function(t,e){return g(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||l.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),t.registerHelper("with",function(t,e){g(t)&&(t=t.call(this));var n=e.fn;if(l.isEmpty(t))return e.inverse(this);if(e.data&&e.ids){var i=s(e.data);i.contextPath=l.appendContextPath(e.data.contextPath,e.ids[0]),e={data:i}}return n(t,e)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)}),t.registerHelper("lookup",function(t,e){return t&&t[e]})}function s(t){var e=l.extend({},t);return e._parent=t,e}var a=function(t){return t&&t.__esModule?t:{"default":t}};n.__esModule=!0,n.HandlebarsEnvironment=i,n.createFrame=s;var o=t("./utils"),l=a(o),h=t("./exception"),c=a(h),u="3.0.1";n.VERSION=u;var p=6;n.COMPILER_REVISION=p;var f={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};n.REVISION_CHANGES=f;var d=l.isArray,g=l.isFunction,m=l.toString,_="[object Object]";i.prototype={constructor:i,logger:v,log:y,registerHelper:function(t,e){if(m.call(t)===_){if(e)throw new c["default"]("Arg not supported with multiple helpers");l.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(m.call(t)===_)l.extend(this.partials,t);else{if("undefined"==typeof e)throw new c["default"]("Attempting to register a partial as undefined");this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]}};var v={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(t,e){if("undefined"!=typeof console&&v.level<=t){var n=v.methodMap[t];(console[n]||console.log).call(console,e)}}};n.logger=v;var y=v.log;n.log=y},{"./exception":17,"./utils":21}],7:[function(t,e,n){"use strict";n.__esModule=!0;var i={Program:function(t,e,n,i){this.loc=i,this.type="Program",this.body=t,this.blockParams=e,this.strip=n},MustacheStatement:function(t,e,n,i,r,s){this.loc=s,this.type="MustacheStatement",this.path=t,this.params=e||[],this.hash=n,this.escaped=i,this.strip=r},BlockStatement:function(t,e,n,i,r,s,a,o,l){this.loc=l,this.type="BlockStatement",this.path=t,this.params=e||[],this.hash=n,this.program=i,this.inverse=r,this.openStrip=s,this.inverseStrip=a,this.closeStrip=o},PartialStatement:function(t,e,n,i,r){this.loc=r,this.type="PartialStatement",this.name=t,this.params=e||[],this.hash=n,this.indent="",this.strip=i},ContentStatement:function(t,e){this.loc=e,this.type="ContentStatement",this.original=this.value=t},CommentStatement:function(t,e,n){this.loc=n,this.type="CommentStatement",this.value=t,this.strip=e},SubExpression:function(t,e,n,i){this.loc=i,this.type="SubExpression",this.path=t,this.params=e||[],this.hash=n},PathExpression:function(t,e,n,i,r){this.loc=r,this.type="PathExpression",this.data=t,this.original=i,this.parts=n,this.depth=e},StringLiteral:function(t,e){this.loc=e,this.type="StringLiteral",this.original=this.value=t},NumberLiteral:function(t,e){this.loc=e,this.type="NumberLiteral",this.original=this.value=Number(t)},BooleanLiteral:function(t,e){this.loc=e,this.type="BooleanLiteral",this.original=this.value="true"===t},UndefinedLiteral:function(t){this.loc=t,this.type="UndefinedLiteral",this.original=this.value=void 0},NullLiteral:function(t){this.loc=t,this.type="NullLiteral",this.original=this.value=null},Hash:function(t,e){this.loc=e,this.type="Hash",this.pairs=t},HashPair:function(t,e,n){this.loc=n,this.type="HashPair",this.key=t,this.value=e},helpers:{helperExpression:function(t){return!("SubExpression"!==t.type&&!t.params.length&&!t.hash)},scopedId:function(t){return/^\.|this\b/.test(t.original)},simpleId:function(t){return 1===t.parts.length&&!i.helpers.scopedId(t)&&!t.depth}}};n["default"]=i,e.exports=n["default"]},{}],8:[function(t,e,n){"use strict";function i(t,e){if("Program"===t.type)return t;a["default"].yy=d,d.locInfo=function(t){return new d.SourceLocation(e&&e.srcName,t)};var n=new c["default"];return n.accept(a["default"].parse(t))}var r=function(t){return t&&t.__esModule?t:{"default":t}};n.__esModule=!0,n.parse=i;var s=t("./parser"),a=r(s),o=t("./ast"),l=r(o),h=t("./whitespace-control"),c=r(h),u=t("./helpers"),p=r(u),f=t("../utils");n.parser=a["default"];var d={};f.extend(d,p,l["default"])},{"../utils":21,"./ast":7,"./helpers":11,"./parser":13,"./whitespace-control":16}],9:[function(e,n,i){"use strict";function r(t,e,n){if(a.isArray(t)){for(var i=[],r=0,s=t.length;s>r;r++)i.push(e.wrap(t[r],n));return i}return"boolean"==typeof t||"number"==typeof t?t+"":t}function s(t){this.srcFile=t,this.source=[]}i.__esModule=!0;var a=e("../utils"),o=void 0;try{if("function"!=typeof t||!t.amd){var l=e("source-map");o=l.SourceNode}}catch(h){}o||(o=function(t,e,n,i){this.src="",i&&this.add(i)},o.prototype={add:function(t){a.isArray(t)&&(t=t.join("")),this.src+=t},prepend:function(t){a.isArray(t)&&(t=t.join("")),this.src=t+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),s.prototype={prepend:function(t,e){this.source.unshift(this.wrap(t,e))},push:function(t,e){this.source.push(this.wrap(t,e))},merge:function(){var t=this.empty();return this.each(function(e){t.add(["  ",e,"\n"])}),t},each:function(t){for(var e=0,n=this.source.length;n>e;e++)t(this.source[e])},empty:function(){var t=void 0===arguments[0]?this.currentLocation||{start:{}}:arguments[0];return new o(t.start.line,t.start.column,this.srcFile)},wrap:function(t){var e=void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return t instanceof o?t:(t=r(t,this,e),new o(e.start.line,e.start.column,this.srcFile,t))},functionCall:function(t,e,n){return n=this.generateList(n),this.wrap([t,e?"."+e+"(":"(",n,")"])},quotedString:function(t){return'"'+(t+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=[];for(var n in t)if(t.hasOwnProperty(n)){var i=r(t[n],this);"undefined"!==i&&e.push([this.quotedString(n),":",i])}var s=this.generateList(e);return s.prepend("{"),s.add("}"),s},generateList:function(t,e){for(var n=this.empty(e),i=0,s=t.length;s>i;i++)i&&n.add(","),n.add(r(t[i],this,e));return n},generateArray:function(t,e){var n=this.generateList(t,e);return n.prepend("["),n.add("]"),n}},i["default"]=s,n.exports=i["default"]},{"../utils":21,"source-map":23}],10:[function(t,e,n){"use strict";function i(){}function r(t,e,n){if(null==t||"string"!=typeof t&&"Program"!==t.type)throw new c["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var i=n.parse(t,e),r=(new n.Compiler).compile(i,e);return(new n.JavaScriptCompiler).compile(r,e)}function s(t,e,n){function i(){var e=n.parse(t,s),i=(new n.Compiler).compile(e,s),r=(new n.JavaScriptCompiler).compile(i,s,void 0,!0);return n.template(r)}function r(t,e){return a||(a=i()),a.call(this,t,e)}var s=void 0===arguments[1]?{}:arguments[1];if(null==t||"string"!=typeof t&&"Program"!==t.type)throw new c["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);"data"in s||(s.data=!0),s.compat&&(s.useDepths=!0);var a=void 0;return r._setup=function(t){return a||(a=i()),a._setup(t)},r._child=function(t,e,n,r){return a||(a=i()),a._child(t,e,n,r)},r}function a(t,e){if(t===e)return!0;if(u.isArray(t)&&u.isArray(e)&&t.length===e.length){for(var n=0;n<t.length;n++)if(!a(t[n],e[n]))return!1;return!0}}function o(t){if(!t.path.parts){var e=t.path;t.path=new f["default"].PathExpression(!1,0,[e.original+""],e.original+"",e.loc)}}var l=function(t){return t&&t.__esModule?t:{"default":t}};n.__esModule=!0,n.Compiler=i,n.precompile=r,n.compile=s;var h=t("../exception"),c=l(h),u=t("../utils"),p=t("./ast"),f=l(p),d=[].slice;i.prototype={compiler:i,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;e>n;n++){var i=this.opcodes[n],r=t.opcodes[n];if(i.opcode!==r.opcode||!a(i.args,r.args))return!1}e=this.children.length;for(var n=0;e>n;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds,e.blockParams=e.blockParams||[];var n=e.knownHelpers;if(e.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},n)for(var i in n)i in n&&(e.knownHelpers[i]=n[i]);return this.accept(t)},compileProgram:function(t){var e=new this.compiler,n=e.compile(t,this.options),i=this.guid++;return this.usePartial=this.usePartial||n.usePartial,this.children[i]=n,this.useDepths=this.useDepths||n.useDepths,i},accept:function(t){this.sourceNode.unshift(t);var e=this[t.type](t);return this.sourceNode.shift(),e},Program:function(t){this.options.blockParams.unshift(t.blockParams);for(var e=t.body,n=e.length,i=0;n>i;i++)this.accept(e[i]);return this.options.blockParams.shift(),this.isSimple=1===n,this.blockParams=t.blockParams?t.blockParams.length:0,this},BlockStatement:function(t){o(t);var e=t.program,n=t.inverse;e=e&&this.compileProgram(e),n=n&&this.compileProgram(n);var i=this.classifySexpr(t);"helper"===i?this.helperSexpr(t,e,n):"simple"===i?(this.simpleSexpr(t),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",t.path.original)):(this.ambiguousSexpr(t,e,n),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},PartialStatement:function(t){this.usePartial=!0;var e=t.params;if(e.length>1)throw new c["default"]("Unsupported number of partial arguments: "+e.length,t);e.length||e.push({type:"PathExpression",parts:[],depth:0});var n=t.name.original,i="SubExpression"===t.name.type;i&&this.accept(t.name),this.setupFullMustacheParams(t,void 0,void 0,!0);var r=t.indent||"";this.options.preventIndent&&r&&(this.opcode("appendContent",r),r=""),this.opcode("invokePartial",i,n,r),this.opcode("append")},MustacheStatement:function(t){this.SubExpression(t),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ContentStatement:function(t){t.value&&this.opcode("appendContent",t.value)},CommentStatement:function(){},SubExpression:function(t){o(t);var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ambiguousSexpr:function(t,e,n){var i=t.path,r=i.parts[0],s=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.accept(i),this.opcode("invokeAmbiguous",r,s)},simpleSexpr:function(t){this.accept(t.path),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),r=t.path,s=r.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",i.length,s);else{if(this.options.knownHelpersOnly)throw new c["default"]("You specified knownHelpersOnly, but used the unknown helper "+s,t);r.falsy=!0,this.accept(r),this.opcode("invokeHelper",i.length,r.original,f["default"].helpers.simpleId(r))}},PathExpression:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0],n=f["default"].helpers.scopedId(t),i=!t.depth&&!n&&this.blockParamIndex(e);i?this.opcode("lookupBlockParam",i,t.parts):e?t.data?(this.options.data=!0,this.opcode("lookupData",t.depth,t.parts)):this.opcode("lookupOnContext",t.parts,t.falsy,n):this.opcode("pushContext")},StringLiteral:function(t){this.opcode("pushString",t.value)},NumberLiteral:function(t){this.opcode("pushLiteral",t.value)},BooleanLiteral:function(t){this.opcode("pushLiteral",t.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(t){var e=t.pairs,n=0,i=e.length;for(this.opcode("pushHash");i>n;n++)this.pushParam(e[n].value);for(;n--;)this.opcode("assignToHash",e[n].key);this.opcode("popHash")},opcode:function(t){this.opcodes.push({opcode:t,args:d.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(t){t&&(this.useDepths=!0)},classifySexpr:function(t){var e=f["default"].helpers.simpleId(t.path),n=e&&!!this.blockParamIndex(t.path.parts[0]),i=!n&&f["default"].helpers.helperExpression(t),r=!n&&(i||e);if(r&&!i){var s=t.path.parts[0],a=this.options;a.knownHelpers[s]?i=!0:a.knownHelpersOnly&&(r=!1)}return i?"helper":r?"ambiguous":"simple"},pushParams:function(t){for(var e=0,n=t.length;n>e;e++)this.pushParam(t[e])},pushParam:function(t){var e=null!=t.value?t.value:t.original||"";if(this.stringParams)e.replace&&(e=e.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",e,t.type),"SubExpression"===t.type&&this.accept(t);else{if(this.trackIds){var n=void 0;if(!t.parts||f["default"].helpers.scopedId(t)||t.depth||(n=this.blockParamIndex(t.parts[0])),n){var i=t.parts.slice(1).join(".");this.opcode("pushId","BlockParam",n,i)}else e=t.original||e,e.replace&&(e=e.replace(/^\.\//g,"").replace(/^\.$/g,"")),this.opcode("pushId",t.type,e)}this.accept(t)}},setupFullMustacheParams:function(t,e,n,i){var r=t.params;return this.pushParams(r),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.accept(t.hash):this.opcode("emptyHash",i),r},blockParamIndex:function(t){for(var e=0,n=this.options.blockParams.length;n>e;e++){var i=this.options.blockParams[e],r=i&&u.indexOf(i,t);if(i&&r>=0)return[e,r]}}}},{"../exception":17,"../utils":21,"./ast":7}],11:[function(t,e,n){"use strict";function i(t,e){this.source=t,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}}function r(t){return/^\[.*\]$/.test(t)?t.substr(1,t.length-2):t}function s(t,e){return{open:"~"===t.charAt(2),close:"~"===e.charAt(e.length-3)}}function a(t){return t.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function o(t,e,n){n=this.locInfo(n);for(var i=t?"@":"",r=[],s=0,a="",o=0,l=e.length;l>o;o++){var h=e[o].part,c=e[o].original!==h;if(i+=(e[o].separator||"")+h,c||".."!==h&&"."!==h&&"this"!==h)r.push(h);else{if(r.length>0)throw new f["default"]("Invalid path: "+i,{loc:n});".."===h&&(s++,a+="../")}}return new this.PathExpression(t,s,r,i,n)}function l(t,e,n,i,r,s){var a=i.charAt(3)||i.charAt(2),o="{"!==a&&"&"!==a;return new this.MustacheStatement(t,e,n,o,r,this.locInfo(s))}function h(t,e,n,i){if(t.path.original!==n){var r={loc:t.path.loc};throw new f["default"](t.path.original+" doesn't match "+n,r)}i=this.locInfo(i);var s=new this.Program([e],null,{},i);return new this.BlockStatement(t.path,t.params,t.hash,s,void 0,{},{},{},i)}function c(t,e,n,i,r,s){if(i&&i.path&&t.path.original!==i.path.original){var a={loc:t.path.loc};throw new f["default"](t.path.original+" doesn't match "+i.path.original,a)}e.blockParams=t.blockParams;var o=void 0,l=void 0;return n&&(n.chain&&(n.program.body[0].closeStrip=i.strip),l=n.strip,o=n.program),r&&(r=o,o=e,e=r),new this.BlockStatement(t.path,t.params,t.hash,e,o,t.strip,l,i&&i.strip,this.locInfo(s))}var u=function(t){return t&&t.__esModule?t:{"default":t}};n.__esModule=!0,n.SourceLocation=i,n.id=r,n.stripFlags=s,n.stripComment=a,n.preparePath=o,n.prepareMustache=l,n.prepareRawBlock=h,n.prepareBlock=c;var p=t("../exception"),f=u(p)},{"../exception":17}],12:[function(t,e,n){"use strict";function i(t){this.value=t}function r(){}function s(t,e,n,i){var r=e.popStack(),s=0,a=n.length;for(t&&a--;a>s;s++)r=e.nameLookup(r,n[s],i);return t?[e.aliasable("this.strict"),"(",r,", ",e.quotedString(n[s]),")"]:r}var a=function(t){return t&&t.__esModule?t:{"default":t}};n.__esModule=!0;var o=t("../base"),l=t("../exception"),h=a(l),c=t("../utils"),u=t("./code-gen"),p=a(u);r.prototype={nameLookup:function(t,e){return r.isValidJavaScriptVariableName(e)?[t,".",e]:[t,"['",e,"']"]},depthedLookup:function(t){return[this.aliasable("this.lookup"),'(depths, "',t,'")']},compilerInfo:function(){var t=o.COMPILER_REVISION,e=o.REVISION_CHANGES[t];return[t,e]},appendToBuffer:function(t,e,n){return c.isArray(t)||(t=[t]),t=this.source.wrap(t,e),this.environment.isSimple?["return ",t,";"]:n?["buffer += ",t,";"]:(t.appendToBuffer=!0,t)},initializeBuffer:function(){return this.quotedString("")},compile:function(t,e,n,i){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!i,this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.useDepths||this.options.compat,this.useBlockParams=this.useBlockParams||t.useBlockParams;var r=t.opcodes,s=void 0,a=void 0,o=void 0,l=void 0;for(o=0,l=r.length;l>o;o++)s=r[o],this.source.currentLocation=s.loc,a=a||s.loc,this[s.opcode].apply(this,s.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new h["default"]("Compile completed with content left on stack");var c=this.createFunctionContext(i);if(this.isChild)return c;var u={compiler:this.compilerInfo(),main:c},p=this.context.programs;for(o=0,l=p.length;l>o;o++)p[o]&&(u[o]=p[o]);return this.environment.usePartial&&(u.usePartial=!0),this.options.data&&(u.useData=!0),this.useDepths&&(u.useDepths=!0),this.useBlockParams&&(u.useBlockParams=!0),this.options.compat&&(u.compat=!0),i?u.compilerOptions=this.options:(u.compiler=JSON.stringify(u.compiler),this.source.currentLocation={start:{line:1,column:0}},u=this.objectLiteral(u),e.srcName?(u=u.toStringWithSourceMap({file:e.destName}),u.map=u.map&&u.map.toString()):u=u.toString()),u},preamble:function(){this.lastContext=0,this.source=new p["default"](this.options.srcName)},createFunctionContext:function(t){var e="",n=this.stackVars.concat(this.registers.list);n.length>0&&(e+=", "+n.join(", "));var i=0;for(var r in this.aliases){var s=this.aliases[r];this.aliases.hasOwnProperty(r)&&s.children&&s.referenceCount>1&&(e+=", alias"+ ++i+"="+r,s.children[0]="alias"+i)}var a=["depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&a.push("blockParams"),this.useDepths&&a.push("depths");var o=this.mergeSource(e);return t?(a.push(o),Function.apply(this,a)):this.source.wrap(["function(",a.join(","),") {\n  ",o,"}"])},mergeSource:function(t){var e=this.environment.isSimple,n=!this.forceBuffer,i=void 0,r=void 0,s=void 0,a=void 0;return this.source.each(function(t){t.appendToBuffer?(s?t.prepend("  + "):s=t,a=t):(s&&(r?s.prepend("buffer += "):i=!0,a.add(";"),s=a=void 0),r=!0,e||(n=!1))}),n?s?(s.prepend("return "),a.add(";")):r||this.source.push('return "";'):(t+=", buffer = "+(i?"":this.initializeBuffer()),s?(s.prepend("return buffer + "),a.add(";")):this.source.push("return buffer;")),t&&this.source.prepend("var "+t.substring(2)+(i?"":";\n")),this.source.merge()},blockValue:function(t){var e=this.aliasable("helpers.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs(t,0,n);var i=this.popStack();n.splice(1,0,i),this.push(this.source.functionCall(e,"call",n))},ambiguousBlockValue:function(){var t=this.aliasable("helpers.blockHelperMissing"),e=[this.contextName(0)];this.setupHelperArgs("",0,e,!0),this.flushInline();var n=this.topStack();e.splice(1,0,n),this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(t,"call",e),"}"])},appendContent:function(t){this.pendingContent?t=this.pendingContent+t:this.pendingLocation=this.source.currentLocation,this.pendingContent=t},append:function(){if(this.isInline())this.replaceStack(function(t){return[" != null ? ",t,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var t=this.popStack();this.pushSource(["if (",t," != null) { ",this.appendToBuffer(t,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("this.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,n){var i=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[i++])),this.resolvePath("context",t,i,e)},lookupBlockParam:function(t,e){this.useBlockParams=!0,this.push(["blockParams[",t[0],"][",t[1],"]"]),this.resolvePath("context",e,1)},lookupData:function(t,e){t?this.pushStackLiteral("this.data(data, "+t+")"):this.pushStackLiteral("data"),this.resolvePath("data",e,0,!0)},resolvePath:function(t,e,n,i){var r=this;if(this.options.strict||this.options.assumeObjects)return void this.push(s(this.options.strict,this,e,t));for(var a=e.length;a>n;n++)this.replaceStack(function(s){var a=r.nameLookup(s,e[n],t);return i?[" && ",a]:[" != null ? ",a," : ",s]})},resolvePossibleLambda:function(){this.push([this.aliasable("this.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"SubExpression"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(t){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(t?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(t.ids)),this.stringParams&&(this.push(this.objectLiteral(t.contexts)),this.push(this.objectLiteral(t.types))),this.push(this.objectLiteral(t.values))},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e,n){var i=this.popStack(),r=this.setupHelper(t,e),s=n?[r.name," || "]:"",a=["("].concat(s,i);this.options.strict||a.push(" || ",this.aliasable("helpers.helperMissing")),a.push(")"),this.push(this.source.functionCall(a,"call",r.callParams))},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function(t,e){this.useRegister("helper");var n=this.popStack();this.emptyHash();var i=this.setupHelper(0,t,e),r=this.lastHelper=this.nameLookup("helpers",t,"helper"),s=["(","(helper = ",r," || ",n,")"];this.options.strict||(s[0]="(helper = ",s.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",s,i.paramsInit?["),(",i.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",i.callParams)," : helper))"])},invokePartial:function(t,e,n){var i=[],r=this.setupParams(e,1,i,!1);t&&(e=this.popStack(),delete r.name),n&&(r.indent=JSON.stringify(n)),r.helpers="helpers",r.partials="partials",t?i.unshift(e):i.unshift(this.nameLookup("partials",e,"partial")),this.options.compat&&(r.depths="depths"),r=this.objectLiteral(r),i.push(r),this.push(this.source.functionCall("this.invokePartial","",i))},assignToHash:function(t){var e=this.popStack(),n=void 0,i=void 0,r=void 0;this.trackIds&&(r=this.popStack()),this.stringParams&&(i=this.popStack(),n=this.popStack());var s=this.hash;n&&(s.contexts[t]=n),i&&(s.types[t]=i),r&&(s.ids[t]=r),s.values[t]=e},pushId:function(t,e,n){"BlockParam"===t?this.pushStackLiteral("blockParams["+e[0]+"].path["+e[1]+"]"+(n?" + "+JSON.stringify("."+n):"")):"PathExpression"===t?this.pushString(e):"SubExpression"===t?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:r,compileChildren:function(t,e){for(var n=t.children,i=void 0,r=void 0,s=0,a=n.length;a>s;s++){i=n[s],r=new this.compiler;var o=this.matchExistingProgram(i);null==o?(this.context.programs.push(""),o=this.context.programs.length,i.index=o,i.name="program"+o,this.context.programs[o]=r.compile(i,e,this.context,!this.precompile),this.context.environments[o]=i,this.useDepths=this.useDepths||r.useDepths,this.useBlockParams=this.useBlockParams||r.useBlockParams):(i.index=o,i.name="program"+o,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;n>e;e++){var i=this.context.environments[e];if(i&&i.equals(t))return e}},programExpression:function(t){var e=this.environment.children[t],n=[e.index,"data",e.blockParams];return(this.useBlockParams||this.useDepths)&&n.push("blockParams"),this.useDepths&&n.push("depths"),"this.program("+n.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},push:function(t){return t instanceof i||(t=this.source.wrap(t)),
this.inlineStack.push(t),t},pushStackLiteral:function(t){this.push(new i(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),t&&this.source.push(t)},replaceStack:function(t){var e=["("],n=void 0,r=void 0,s=void 0;if(!this.isInline())throw new h["default"]("replaceStack on non-inline");var a=this.popStack(!0);if(a instanceof i)n=[a.value],e=["(",n],s=!0;else{r=!0;var o=this.incrStack();e=["((",this.push(o)," = ",a,")"],n=this.topStack()}var l=t.call(this,n);s||this.popStack(),r&&this.stackSlot--,this.push(e.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;this.inlineStack=[];for(var e=0,n=t.length;n>e;e++){var r=t[e];if(r instanceof i)this.compileStack.push(r);else{var s=this.incrStack();this.pushSource([s," = ",r,";"]),this.compileStack.push(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),n=(e?this.inlineStack:this.compileStack).pop();if(!t&&n instanceof i)return n.value;if(!e){if(!this.stackSlot)throw new h["default"]("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof i?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return this.source.quotedString(t)},objectLiteral:function(t){return this.source.objectLiteral(t)},aliasable:function(t){var e=this.aliases[t];return e?(e.referenceCount++,e):(e=this.aliases[t]=this.source.wrap(t),e.aliasable=!0,e.referenceCount=1,e)},setupHelper:function(t,e,n){var i=[],r=this.setupHelperArgs(e,t,i,n),s=this.nameLookup("helpers",e,"helper");return{params:i,paramsInit:r,name:s,callParams:[this.contextName(0)].concat(i)}},setupParams:function(t,e,n){var i={},r=[],s=[],a=[],o=void 0;i.name=this.quotedString(t),i.hash=this.popStack(),this.trackIds&&(i.hashIds=this.popStack()),this.stringParams&&(i.hashTypes=this.popStack(),i.hashContexts=this.popStack());var l=this.popStack(),h=this.popStack();(h||l)&&(i.fn=h||"this.noop",i.inverse=l||"this.noop");for(var c=e;c--;)o=this.popStack(),n[c]=o,this.trackIds&&(a[c]=this.popStack()),this.stringParams&&(s[c]=this.popStack(),r[c]=this.popStack());return this.trackIds&&(i.ids=this.source.generateArray(a)),this.stringParams&&(i.types=this.source.generateArray(s),i.contexts=this.source.generateArray(r)),this.options.data&&(i.data="data"),this.useBlockParams&&(i.blockParams="blockParams"),i},setupHelperArgs:function(t,e,n,i){var r=this.setupParams(t,e,n,!0);return r=this.objectLiteral(r),i?(this.useRegister("options"),n.push("options"),["options=",r]):(n.push(r),"")}},function(){for(var t="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=r.RESERVED_WORDS={},n=0,i=t.length;i>n;n++)e[t[n]]=!0}(),r.isValidJavaScriptVariableName=function(t){return!r.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},n["default"]=r,e.exports=n["default"]},{"../base":6,"../exception":17,"../utils":21,"./code-gen":9}],13:[function(t,e,n){"use strict";n.__esModule=!0;var i=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,content:12,COMMENT:13,CONTENT:14,openRawBlock:15,END_RAW_BLOCK:16,OPEN_RAW_BLOCK:17,helperName:18,openRawBlock_repetition0:19,openRawBlock_option0:20,CLOSE_RAW_BLOCK:21,openBlock:22,block_option0:23,closeBlock:24,openInverse:25,block_option1:26,OPEN_BLOCK:27,openBlock_repetition0:28,openBlock_option0:29,openBlock_option1:30,CLOSE:31,OPEN_INVERSE:32,openInverse_repetition0:33,openInverse_option0:34,openInverse_option1:35,openInverseChain:36,OPEN_INVERSE_CHAIN:37,openInverseChain_repetition0:38,openInverseChain_option0:39,openInverseChain_option1:40,inverseAndProgram:41,INVERSE:42,inverseChain:43,inverseChain_option0:44,OPEN_ENDBLOCK:45,OPEN:46,mustache_repetition0:47,mustache_option0:48,OPEN_UNESCAPED:49,mustache_repetition1:50,mustache_option1:51,CLOSE_UNESCAPED:52,OPEN_PARTIAL:53,partialName:54,partial_repetition0:55,partial_option0:56,param:57,sexpr:58,OPEN_SEXPR:59,sexpr_repetition0:60,sexpr_option0:61,CLOSE_SEXPR:62,hash:63,hash_repetition_plus0:64,hashSegment:65,ID:66,EQUALS:67,blockParams:68,OPEN_BLOCK_PARAMS:69,blockParams_repetition_plus0:70,CLOSE_BLOCK_PARAMS:71,path:72,dataName:73,STRING:74,NUMBER:75,BOOLEAN:76,UNDEFINED:77,NULL:78,DATA:79,pathSegments:80,SEP:81,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",13:"COMMENT",14:"CONTENT",16:"END_RAW_BLOCK",17:"OPEN_RAW_BLOCK",21:"CLOSE_RAW_BLOCK",27:"OPEN_BLOCK",31:"CLOSE",32:"OPEN_INVERSE",37:"OPEN_INVERSE_CHAIN",42:"INVERSE",45:"OPEN_ENDBLOCK",46:"OPEN",49:"OPEN_UNESCAPED",52:"CLOSE_UNESCAPED",53:"OPEN_PARTIAL",59:"OPEN_SEXPR",62:"CLOSE_SEXPR",66:"ID",67:"EQUALS",69:"OPEN_BLOCK_PARAMS",71:"CLOSE_BLOCK_PARAMS",74:"STRING",75:"NUMBER",76:"BOOLEAN",77:"UNDEFINED",78:"NULL",79:"DATA",81:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[12,1],[10,3],[15,5],[9,4],[9,4],[22,6],[25,6],[36,6],[41,2],[43,3],[43,1],[24,3],[8,5],[8,5],[11,5],[57,1],[57,1],[58,5],[63,1],[65,3],[68,3],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[54,1],[54,1],[73,2],[72,1],[80,3],[80,1],[6,0],[6,2],[19,0],[19,2],[20,0],[20,1],[23,0],[23,1],[26,0],[26,1],[28,0],[28,2],[29,0],[29,1],[30,0],[30,1],[33,0],[33,2],[34,0],[34,1],[35,0],[35,1],[38,0],[38,2],[39,0],[39,1],[40,0],[40,1],[44,0],[44,1],[47,0],[47,2],[48,0],[48,1],[50,0],[50,2],[51,0],[51,1],[55,0],[55,2],[56,0],[56,1],[60,0],[60,2],[61,0],[61,1],[64,1],[64,2],[70,1],[70,2]],performAction:function(t,e,n,i,r,s,a){var o=s.length-1;switch(r){case 1:return s[o-1];case 2:this.$=new i.Program(s[o],null,{},i.locInfo(this._$));break;case 3:this.$=s[o];break;case 4:this.$=s[o];break;case 5:this.$=s[o];break;case 6:this.$=s[o];break;case 7:this.$=s[o];break;case 8:this.$=new i.CommentStatement(i.stripComment(s[o]),i.stripFlags(s[o],s[o]),i.locInfo(this._$));break;case 9:this.$=new i.ContentStatement(s[o],i.locInfo(this._$));break;case 10:this.$=i.prepareRawBlock(s[o-2],s[o-1],s[o],this._$);break;case 11:this.$={path:s[o-3],params:s[o-2],hash:s[o-1]};break;case 12:this.$=i.prepareBlock(s[o-3],s[o-2],s[o-1],s[o],!1,this._$);break;case 13:this.$=i.prepareBlock(s[o-3],s[o-2],s[o-1],s[o],!0,this._$);break;case 14:this.$={path:s[o-4],params:s[o-3],hash:s[o-2],blockParams:s[o-1],strip:i.stripFlags(s[o-5],s[o])};break;case 15:this.$={path:s[o-4],params:s[o-3],hash:s[o-2],blockParams:s[o-1],strip:i.stripFlags(s[o-5],s[o])};break;case 16:this.$={path:s[o-4],params:s[o-3],hash:s[o-2],blockParams:s[o-1],strip:i.stripFlags(s[o-5],s[o])};break;case 17:this.$={strip:i.stripFlags(s[o-1],s[o-1]),program:s[o]};break;case 18:var l=i.prepareBlock(s[o-2],s[o-1],s[o],s[o],!1,this._$),h=new i.Program([l],null,{},i.locInfo(this._$));h.chained=!0,this.$={strip:s[o-2].strip,program:h,chain:!0};break;case 19:this.$=s[o];break;case 20:this.$={path:s[o-1],strip:i.stripFlags(s[o-2],s[o])};break;case 21:this.$=i.prepareMustache(s[o-3],s[o-2],s[o-1],s[o-4],i.stripFlags(s[o-4],s[o]),this._$);break;case 22:this.$=i.prepareMustache(s[o-3],s[o-2],s[o-1],s[o-4],i.stripFlags(s[o-4],s[o]),this._$);break;case 23:this.$=new i.PartialStatement(s[o-3],s[o-2],s[o-1],i.stripFlags(s[o-4],s[o]),i.locInfo(this._$));break;case 24:this.$=s[o];break;case 25:this.$=s[o];break;case 26:this.$=new i.SubExpression(s[o-3],s[o-2],s[o-1],i.locInfo(this._$));break;case 27:this.$=new i.Hash(s[o],i.locInfo(this._$));break;case 28:this.$=new i.HashPair(i.id(s[o-2]),s[o],i.locInfo(this._$));break;case 29:this.$=i.id(s[o-1]);break;case 30:this.$=s[o];break;case 31:this.$=s[o];break;case 32:this.$=new i.StringLiteral(s[o],i.locInfo(this._$));break;case 33:this.$=new i.NumberLiteral(s[o],i.locInfo(this._$));break;case 34:this.$=new i.BooleanLiteral(s[o],i.locInfo(this._$));break;case 35:this.$=new i.UndefinedLiteral(i.locInfo(this._$));break;case 36:this.$=new i.NullLiteral(i.locInfo(this._$));break;case 37:this.$=s[o];break;case 38:this.$=s[o];break;case 39:this.$=i.preparePath(!0,s[o],this._$);break;case 40:this.$=i.preparePath(!1,s[o],this._$);break;case 41:s[o-2].push({part:i.id(s[o]),original:s[o],separator:s[o-1]}),this.$=s[o-2];break;case 42:this.$=[{part:i.id(s[o]),original:s[o]}];break;case 43:this.$=[];break;case 44:s[o-1].push(s[o]);break;case 45:this.$=[];break;case 46:s[o-1].push(s[o]);break;case 53:this.$=[];break;case 54:s[o-1].push(s[o]);break;case 59:this.$=[];break;case 60:s[o-1].push(s[o]);break;case 65:this.$=[];break;case 66:s[o-1].push(s[o]);break;case 73:this.$=[];break;case 74:s[o-1].push(s[o]);break;case 77:this.$=[];break;case 78:s[o-1].push(s[o]);break;case 81:this.$=[];break;case 82:s[o-1].push(s[o]);break;case 85:this.$=[];break;case 86:s[o-1].push(s[o]);break;case 89:this.$=[s[o]];break;case 90:s[o-1].push(s[o]);break;case 91:this.$=[s[o]];break;case 92:s[o-1].push(s[o])}},table:[{3:1,4:2,5:[2,43],6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],46:[2,43],49:[2,43],53:[2,43]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:[1,11],14:[1,18],15:16,17:[1,21],22:14,25:15,27:[1,19],32:[1,20],37:[2,2],42:[2,2],45:[2,2],46:[1,12],49:[1,13],53:[1,17]},{1:[2,1]},{5:[2,44],13:[2,44],14:[2,44],17:[2,44],27:[2,44],32:[2,44],37:[2,44],42:[2,44],45:[2,44],46:[2,44],49:[2,44],53:[2,44]},{5:[2,3],13:[2,3],14:[2,3],17:[2,3],27:[2,3],32:[2,3],37:[2,3],42:[2,3],45:[2,3],46:[2,3],49:[2,3],53:[2,3]},{5:[2,4],13:[2,4],14:[2,4],17:[2,4],27:[2,4],32:[2,4],37:[2,4],42:[2,4],45:[2,4],46:[2,4],49:[2,4],53:[2,4]},{5:[2,5],13:[2,5],14:[2,5],17:[2,5],27:[2,5],32:[2,5],37:[2,5],42:[2,5],45:[2,5],46:[2,5],49:[2,5],53:[2,5]},{5:[2,6],13:[2,6],14:[2,6],17:[2,6],27:[2,6],32:[2,6],37:[2,6],42:[2,6],45:[2,6],46:[2,6],49:[2,6],53:[2,6]},{5:[2,7],13:[2,7],14:[2,7],17:[2,7],27:[2,7],32:[2,7],37:[2,7],42:[2,7],45:[2,7],46:[2,7],49:[2,7],53:[2,7]},{5:[2,8],13:[2,8],14:[2,8],17:[2,8],27:[2,8],32:[2,8],37:[2,8],42:[2,8],45:[2,8],46:[2,8],49:[2,8],53:[2,8]},{18:22,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:33,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:34,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{4:35,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{12:36,14:[1,18]},{18:38,54:37,58:39,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,9],13:[2,9],14:[2,9],16:[2,9],17:[2,9],27:[2,9],32:[2,9],37:[2,9],42:[2,9],45:[2,9],46:[2,9],49:[2,9],53:[2,9]},{18:41,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:42,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:43,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[2,73],47:44,59:[2,73],66:[2,73],74:[2,73],75:[2,73],76:[2,73],77:[2,73],78:[2,73],79:[2,73]},{21:[2,30],31:[2,30],52:[2,30],59:[2,30],62:[2,30],66:[2,30],69:[2,30],74:[2,30],75:[2,30],76:[2,30],77:[2,30],78:[2,30],79:[2,30]},{21:[2,31],31:[2,31],52:[2,31],59:[2,31],62:[2,31],66:[2,31],69:[2,31],74:[2,31],75:[2,31],76:[2,31],77:[2,31],78:[2,31],79:[2,31]},{21:[2,32],31:[2,32],52:[2,32],59:[2,32],62:[2,32],66:[2,32],69:[2,32],74:[2,32],75:[2,32],76:[2,32],77:[2,32],78:[2,32],79:[2,32]},{21:[2,33],31:[2,33],52:[2,33],59:[2,33],62:[2,33],66:[2,33],69:[2,33],74:[2,33],75:[2,33],76:[2,33],77:[2,33],78:[2,33],79:[2,33]},{21:[2,34],31:[2,34],52:[2,34],59:[2,34],62:[2,34],66:[2,34],69:[2,34],74:[2,34],75:[2,34],76:[2,34],77:[2,34],78:[2,34],79:[2,34]},{21:[2,35],31:[2,35],52:[2,35],59:[2,35],62:[2,35],66:[2,35],69:[2,35],74:[2,35],75:[2,35],76:[2,35],77:[2,35],78:[2,35],79:[2,35]},{21:[2,36],31:[2,36],52:[2,36],59:[2,36],62:[2,36],66:[2,36],69:[2,36],74:[2,36],75:[2,36],76:[2,36],77:[2,36],78:[2,36],79:[2,36]},{21:[2,40],31:[2,40],52:[2,40],59:[2,40],62:[2,40],66:[2,40],69:[2,40],74:[2,40],75:[2,40],76:[2,40],77:[2,40],78:[2,40],79:[2,40],81:[1,45]},{66:[1,32],80:46},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{50:47,52:[2,77],59:[2,77],66:[2,77],74:[2,77],75:[2,77],76:[2,77],77:[2,77],78:[2,77],79:[2,77]},{23:48,36:50,37:[1,52],41:51,42:[1,53],43:49,45:[2,49]},{26:54,41:55,42:[1,53],45:[2,51]},{16:[1,56]},{31:[2,81],55:57,59:[2,81],66:[2,81],74:[2,81],75:[2,81],76:[2,81],77:[2,81],78:[2,81],79:[2,81]},{31:[2,37],59:[2,37],66:[2,37],74:[2,37],75:[2,37],76:[2,37],77:[2,37],78:[2,37],79:[2,37]},{31:[2,38],59:[2,38],66:[2,38],74:[2,38],75:[2,38],76:[2,38],77:[2,38],78:[2,38],79:[2,38]},{18:58,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{28:59,31:[2,53],59:[2,53],66:[2,53],69:[2,53],74:[2,53],75:[2,53],76:[2,53],77:[2,53],78:[2,53],79:[2,53]},{31:[2,59],33:60,59:[2,59],66:[2,59],69:[2,59],74:[2,59],75:[2,59],76:[2,59],77:[2,59],78:[2,59],79:[2,59]},{19:61,21:[2,45],59:[2,45],66:[2,45],74:[2,45],75:[2,45],76:[2,45],77:[2,45],78:[2,45],79:[2,45]},{18:65,31:[2,75],48:62,57:63,58:66,59:[1,40],63:64,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{66:[1,70]},{21:[2,39],31:[2,39],52:[2,39],59:[2,39],62:[2,39],66:[2,39],69:[2,39],74:[2,39],75:[2,39],76:[2,39],77:[2,39],78:[2,39],79:[2,39],81:[1,45]},{18:65,51:71,52:[2,79],57:72,58:66,59:[1,40],63:73,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{24:74,45:[1,75]},{45:[2,50]},{4:76,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{45:[2,19]},{18:77,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:78,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{24:79,45:[1,75]},{45:[2,52]},{5:[2,10],13:[2,10],14:[2,10],17:[2,10],27:[2,10],32:[2,10],37:[2,10],42:[2,10],45:[2,10],46:[2,10],49:[2,10],53:[2,10]},{18:65,31:[2,83],56:80,57:81,58:66,59:[1,40],63:82,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{59:[2,85],60:83,62:[2,85],66:[2,85],74:[2,85],75:[2,85],76:[2,85],77:[2,85],78:[2,85],79:[2,85]},{18:65,29:84,31:[2,55],57:85,58:66,59:[1,40],63:86,64:67,65:68,66:[1,69],69:[2,55],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,31:[2,61],34:87,57:88,58:66,59:[1,40],63:89,64:67,65:68,66:[1,69],69:[2,61],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,20:90,21:[2,47],57:91,58:66,59:[1,40],63:92,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[1,93]},{31:[2,74],59:[2,74],66:[2,74],74:[2,74],75:[2,74],76:[2,74],77:[2,74],78:[2,74],79:[2,74]},{31:[2,76]},{21:[2,24],31:[2,24],52:[2,24],59:[2,24],62:[2,24],66:[2,24],69:[2,24],74:[2,24],75:[2,24],76:[2,24],77:[2,24],78:[2,24],79:[2,24]},{21:[2,25],31:[2,25],52:[2,25],59:[2,25],62:[2,25],66:[2,25],69:[2,25],74:[2,25],75:[2,25],76:[2,25],77:[2,25],78:[2,25],79:[2,25]},{21:[2,27],31:[2,27],52:[2,27],62:[2,27],65:94,66:[1,95],69:[2,27]},{21:[2,89],31:[2,89],52:[2,89],62:[2,89],66:[2,89],69:[2,89]},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],67:[1,96],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{21:[2,41],31:[2,41],52:[2,41],59:[2,41],62:[2,41],66:[2,41],69:[2,41],74:[2,41],75:[2,41],76:[2,41],77:[2,41],78:[2,41],79:[2,41],81:[2,41]},{52:[1,97]},{52:[2,78],59:[2,78],66:[2,78],74:[2,78],75:[2,78],76:[2,78],77:[2,78],78:[2,78],79:[2,78]},{52:[2,80]},{5:[2,12],13:[2,12],14:[2,12],17:[2,12],27:[2,12],32:[2,12],37:[2,12],42:[2,12],45:[2,12],46:[2,12],49:[2,12],53:[2,12]},{18:98,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{36:50,37:[1,52],41:51,42:[1,53],43:100,44:99,45:[2,71]},{31:[2,65],38:101,59:[2,65],66:[2,65],69:[2,65],74:[2,65],75:[2,65],76:[2,65],77:[2,65],78:[2,65],79:[2,65]},{45:[2,17]},{5:[2,13],13:[2,13],14:[2,13],17:[2,13],27:[2,13],32:[2,13],37:[2,13],42:[2,13],45:[2,13],46:[2,13],49:[2,13],53:[2,13]},{31:[1,102]},{31:[2,82],59:[2,82],66:[2,82],74:[2,82],75:[2,82],76:[2,82],77:[2,82],78:[2,82],79:[2,82]},{31:[2,84]},{18:65,57:104,58:66,59:[1,40],61:103,62:[2,87],63:105,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{30:106,31:[2,57],68:107,69:[1,108]},{31:[2,54],59:[2,54],66:[2,54],69:[2,54],74:[2,54],75:[2,54],76:[2,54],77:[2,54],78:[2,54],79:[2,54]},{31:[2,56],69:[2,56]},{31:[2,63],35:109,68:110,69:[1,108]},{31:[2,60],59:[2,60],66:[2,60],69:[2,60],74:[2,60],75:[2,60],76:[2,60],77:[2,60],78:[2,60],79:[2,60]},{31:[2,62],69:[2,62]},{21:[1,111]},{21:[2,46],59:[2,46],66:[2,46],74:[2,46],75:[2,46],76:[2,46],77:[2,46],78:[2,46],79:[2,46]},{21:[2,48]},{5:[2,21],13:[2,21],14:[2,21],17:[2,21],27:[2,21],32:[2,21],37:[2,21],42:[2,21],45:[2,21],46:[2,21],49:[2,21],53:[2,21]},{21:[2,90],31:[2,90],52:[2,90],62:[2,90],66:[2,90],69:[2,90]},{67:[1,96]},{18:65,57:112,58:66,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,22],13:[2,22],14:[2,22],17:[2,22],27:[2,22],32:[2,22],37:[2,22],42:[2,22],45:[2,22],46:[2,22],49:[2,22],53:[2,22]},{31:[1,113]},{45:[2,18]},{45:[2,72]},{18:65,31:[2,67],39:114,57:115,58:66,59:[1,40],63:116,64:67,65:68,66:[1,69],69:[2,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,23],13:[2,23],14:[2,23],17:[2,23],27:[2,23],32:[2,23],37:[2,23],42:[2,23],45:[2,23],46:[2,23],49:[2,23],53:[2,23]},{62:[1,117]},{59:[2,86],62:[2,86],66:[2,86],74:[2,86],75:[2,86],76:[2,86],77:[2,86],78:[2,86],79:[2,86]},{62:[2,88]},{31:[1,118]},{31:[2,58]},{66:[1,120],70:119},{31:[1,121]},{31:[2,64]},{14:[2,11]},{21:[2,28],31:[2,28],52:[2,28],62:[2,28],66:[2,28],69:[2,28]},{5:[2,20],13:[2,20],14:[2,20],17:[2,20],27:[2,20],32:[2,20],37:[2,20],42:[2,20],45:[2,20],46:[2,20],49:[2,20],53:[2,20]},{31:[2,69],40:122,68:123,69:[1,108]},{31:[2,66],59:[2,66],66:[2,66],69:[2,66],74:[2,66],75:[2,66],76:[2,66],77:[2,66],78:[2,66],79:[2,66]},{31:[2,68],69:[2,68]},{21:[2,26],31:[2,26],52:[2,26],59:[2,26],62:[2,26],66:[2,26],69:[2,26],74:[2,26],75:[2,26],76:[2,26],77:[2,26],78:[2,26],79:[2,26]},{13:[2,14],14:[2,14],17:[2,14],27:[2,14],32:[2,14],37:[2,14],42:[2,14],45:[2,14],46:[2,14],49:[2,14],53:[2,14]},{66:[1,125],71:[1,124]},{66:[2,91],71:[2,91]},{13:[2,15],14:[2,15],17:[2,15],27:[2,15],32:[2,15],42:[2,15],45:[2,15],46:[2,15],49:[2,15],53:[2,15]},{31:[1,126]},{31:[2,70]},{31:[2,29]},{66:[2,92],71:[2,92]},{13:[2,16],14:[2,16],17:[2,16],27:[2,16],32:[2,16],37:[2,16],42:[2,16],45:[2,16],46:[2,16],49:[2,16],53:[2,16]}],defaultActions:{4:[2,1],49:[2,50],51:[2,19],55:[2,52],64:[2,76],73:[2,80],78:[2,17],82:[2,84],92:[2,48],99:[2,18],100:[2,72],105:[2,88],107:[2,58],110:[2,64],111:[2,11],123:[2,70],124:[2,29]},parseError:function(t,e){throw new Error(t)},parse:function(t){function e(){var t;return t=n.lexer.lex()||1,"number"!=typeof t&&(t=n.symbols_[t]||t),t}var n=this,i=[0],r=[null],s=[],a=this.table,o="",l=0,h=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;s.push(u);var p=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var f,d,g,m,_,v,y,b,k,S={};;){if(g=i[i.length-1],this.defaultActions[g]?m=this.defaultActions[g]:((null===f||"undefined"==typeof f)&&(f=e()),m=a[g]&&a[g][f]),"undefined"==typeof m||!m.length||!m[0]){var C="";if(!c){k=[];for(v in a[g])this.terminals_[v]&&v>2&&k.push("'"+this.terminals_[v]+"'");C=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[f]||f)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==f?"end of input":"'"+(this.terminals_[f]||f)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[f]||f,line:this.lexer.yylineno,loc:u,expected:k})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+f);switch(m[0]){case 1:i.push(f),r.push(this.lexer.yytext),s.push(this.lexer.yylloc),i.push(m[1]),f=null,d?(f=d,d=null):(h=this.lexer.yyleng,o=this.lexer.yytext,l=this.lexer.yylineno,u=this.lexer.yylloc,c>0&&c--);break;case 2:if(y=this.productions_[m[1]][1],S.$=r[r.length-y],S._$={first_line:s[s.length-(y||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(y||1)].first_column,last_column:s[s.length-1].last_column},p&&(S._$.range=[s[s.length-(y||1)].range[0],s[s.length-1].range[1]]),_=this.performAction.call(S,o,h,l,this.yy,m[1],r,s),"undefined"!=typeof _)return _;y&&(i=i.slice(0,-1*y*2),r=r.slice(0,-1*y),s=s.slice(0,-1*y)),i.push(this.productions_[m[1]][0]),r.push(S.$),s.push(S._$),b=a[i[i.length-2]][i[i.length-1]],i.push(b);break;case 3:return!0}}return!0}},n=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,i,r;this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),a=0;a<s.length&&(n=this._input.match(this.rules[s[a]]),!n||e&&!(n[0].length>e[0].length)||(e=n,i=a,this.options.flex));a++);return e?(r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,s[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,n,i){function r(t,n){return e.yytext=e.yytext.substr(t,e.yyleng-n)}switch(n){case 0:if("\\\\"===e.yytext.slice(-2)?(r(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(r(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return e.yytext=e.yytext.substr(5,e.yyleng-9),this.popState(),16;case 4:return 14;case 5:return this.popState(),13;case 6:return 59;case 7:return 62;case 8:return 17;case 9:return this.popState(),this.begin("raw"),21;case 10:return 53;case 11:return 27;case 12:return 45;case 13:return this.popState(),42;case 14:return this.popState(),42;case 15:return 32;case 16:return 37;case 17:return 49;case 18:return 46;case 19:this.unput(e.yytext),this.popState(),this.begin("com");break;case 20:return this.popState(),13;case 21:return 46;case 22:return 67;case 23:return 66;case 24:return 66;case 25:return 81;case 26:break;case 27:return this.popState(),52;case 28:return this.popState(),31;case 29:return e.yytext=r(1,2).replace(/\\"/g,'"'),74;case 30:return e.yytext=r(1,2).replace(/\\'/g,"'"),74;case 31:return 79;case 32:return 76;case 33:return 76;case 34:return 77;case 35:return 78;case 36:return 75;case 37:return 69;case 38:return 71;case 39:return 66;case 40:return 66;case 41:return"INVALID";case 42:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,42],inclusive:!0}},t}();return e.lexer=n,t.prototype=e,e.Parser=t,new t}();n["default"]=i,e.exports=n["default"]},{}],14:[function(t,e,n){"use strict";function i(t){return(new r).accept(t)}function r(){this.padding=0}var s=function(t){return t&&t.__esModule?t:{"default":t}};n.__esModule=!0,n.print=i,n.PrintVisitor=r;var a=t("./visitor"),o=s(a);r.prototype=new o["default"],r.prototype.pad=function(t){for(var e="",n=0,i=this.padding;i>n;n++)e+="  ";return e=e+t+"\n"},r.prototype.Program=function(t){var e="",n=t.body,i=void 0,r=void 0;if(t.blockParams){var s="BLOCK PARAMS: [";for(i=0,r=t.blockParams.length;r>i;i++)s+=" "+t.blockParams[i];s+=" ]",e+=this.pad(s)}for(i=0,r=n.length;r>i;i++)e+=this.accept(n[i]);return this.padding--,e},r.prototype.MustacheStatement=function(t){return this.pad("{{ "+this.SubExpression(t)+" }}")},r.prototype.BlockStatement=function(t){var e="";return e+=this.pad("BLOCK:"),this.padding++,e+=this.pad(this.SubExpression(t)),t.program&&(e+=this.pad("PROGRAM:"),this.padding++,e+=this.accept(t.program),this.padding--),t.inverse&&(t.program&&this.padding++,e+=this.pad("{{^}}"),this.padding++,e+=this.accept(t.inverse),this.padding--,t.program&&this.padding--),this.padding--,e},r.prototype.PartialStatement=function(t){var e="PARTIAL:"+t.name.original;return t.params[0]&&(e+=" "+this.accept(t.params[0])),t.hash&&(e+=" "+this.accept(t.hash)),this.pad("{{> "+e+" }}")},r.prototype.ContentStatement=function(t){return this.pad("CONTENT[ '"+t.value+"' ]")},r.prototype.CommentStatement=function(t){return this.pad("{{! '"+t.value+"' }}")},r.prototype.SubExpression=function(t){for(var e=t.params,n=[],i=void 0,r=0,s=e.length;s>r;r++)n.push(this.accept(e[r]));return e="["+n.join(", ")+"]",i=t.hash?" "+this.accept(t.hash):"",this.accept(t.path)+" "+e+i},r.prototype.PathExpression=function(t){var e=t.parts.join("/");return(t.data?"@":"")+"PATH:"+e},r.prototype.StringLiteral=function(t){return'"'+t.value+'"'},r.prototype.NumberLiteral=function(t){return"NUMBER{"+t.value+"}"},r.prototype.BooleanLiteral=function(t){return"BOOLEAN{"+t.value+"}"},r.prototype.UndefinedLiteral=function(){return"UNDEFINED"},r.prototype.NullLiteral=function(){return"NULL"},r.prototype.Hash=function(t){for(var e=t.pairs,n=[],i=0,r=e.length;r>i;i++)n.push(this.accept(e[i]));return"HASH{"+n.join(", ")+"}"},r.prototype.HashPair=function(t){return t.key+"="+this.accept(t.value)}},{"./visitor":15}],15:[function(t,e,n){"use strict";function i(){this.parents=[]}var r=function(t){return t&&t.__esModule?t:{"default":t}};n.__esModule=!0;var s=t("../exception"),a=r(s),o=t("./ast"),l=r(o);i.prototype={constructor:i,mutating:!1,acceptKey:function(t,e){var n=this.accept(t[e]);if(this.mutating){if(n&&(!n.type||!l["default"][n.type]))throw new a["default"]('Unexpected node type "'+n.type+'" found when accepting '+e+" on "+t.type);t[e]=n}},acceptRequired:function(t,e){if(this.acceptKey(t,e),!t[e])throw new a["default"](t.type+" requires "+e)},acceptArray:function(t){for(var e=0,n=t.length;n>e;e++)this.acceptKey(t,e),t[e]||(t.splice(e,1),e--,n--)},accept:function(t){if(t){this.current&&this.parents.unshift(this.current),this.current=t;var e=this[t.type](t);return this.current=this.parents.shift(),!this.mutating||e?e:e!==!1?t:void 0}},Program:function(t){this.acceptArray(t.body)},MustacheStatement:function(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")},BlockStatement:function(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash"),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")},PartialStatement:function(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:function(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")},PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(t){this.acceptArray(t.pairs)},HashPair:function(t){this.acceptRequired(t,"value")}},n["default"]=i,
e.exports=n["default"]},{"../exception":17,"./ast":7}],16:[function(t,e,n){"use strict";function i(){}function r(t,e,n){void 0===e&&(e=t.length);var i=t[e-1],r=t[e-2];return i?"ContentStatement"===i.type?(r||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(i.original):void 0:n}function s(t,e,n){void 0===e&&(e=-1);var i=t[e+1],r=t[e+2];return i?"ContentStatement"===i.type?(r||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(i.original):void 0:n}function a(t,e,n){var i=t[null==e?0:e+1];if(i&&"ContentStatement"===i.type&&(n||!i.rightStripped)){var r=i.value;i.value=i.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),i.rightStripped=i.value!==r}}function o(t,e,n){var i=t[null==e?t.length-1:e-1];if(i&&"ContentStatement"===i.type&&(n||!i.leftStripped)){var r=i.value;return i.value=i.value.replace(n?/\s+$/:/[ \t]+$/,""),i.leftStripped=i.value!==r,i.leftStripped}}var l=function(t){return t&&t.__esModule?t:{"default":t}};n.__esModule=!0;var h=t("./visitor"),c=l(h);i.prototype=new c["default"],i.prototype.Program=function(t){var e=!this.isRootSeen;this.isRootSeen=!0;for(var n=t.body,i=0,l=n.length;l>i;i++){var h=n[i],c=this.accept(h);if(c){var u=r(n,i,e),p=s(n,i,e),f=c.openStandalone&&u,d=c.closeStandalone&&p,g=c.inlineStandalone&&u&&p;c.close&&a(n,i,!0),c.open&&o(n,i,!0),g&&(a(n,i),o(n,i)&&"PartialStatement"===h.type&&(h.indent=/([ \t]+$)/.exec(n[i-1].original)[1])),f&&(a((h.program||h.inverse).body),o(n,i)),d&&(a(n,i),o((h.inverse||h.program).body))}}return t},i.prototype.BlockStatement=function(t){this.accept(t.program),this.accept(t.inverse);var e=t.program||t.inverse,n=t.program&&t.inverse,i=n,l=n;if(n&&n.chained)for(i=n.body[0].program;l.chained;)l=l.body[l.body.length-1].program;var h={open:t.openStrip.open,close:t.closeStrip.close,openStandalone:s(e.body),closeStandalone:r((i||e).body)};if(t.openStrip.close&&a(e.body,null,!0),n){var c=t.inverseStrip;c.open&&o(e.body,null,!0),c.close&&a(i.body,null,!0),t.closeStrip.open&&o(l.body,null,!0),r(e.body)&&s(i.body)&&(o(e.body),a(i.body))}else t.closeStrip.open&&o(e.body,null,!0);return h},i.prototype.MustacheStatement=function(t){return t.strip},i.prototype.PartialStatement=i.prototype.CommentStatement=function(t){var e=t.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}},n["default"]=i,e.exports=n["default"]},{"./visitor":15}],17:[function(t,e,n){"use strict";function i(t,e){var n=e&&e.loc,s=void 0,a=void 0;n&&(s=n.start.line,a=n.start.column,t+=" - "+s+":"+a);for(var o=Error.prototype.constructor.call(this,t),l=0;l<r.length;l++)this[r[l]]=o[r[l]];Error.captureStackTrace&&Error.captureStackTrace(this,i),n&&(this.lineNumber=s,this.column=a)}n.__esModule=!0;var r=["description","fileName","lineNumber","message","name","number","stack"];i.prototype=new Error,n["default"]=i,e.exports=n["default"]},{}],18:[function(t,e,n){(function(t){"use strict";n.__esModule=!0,n["default"]=function(e){var n="undefined"!=typeof t?t:window,i=n.Handlebars;e.noConflict=function(){n.Handlebars===e&&(n.Handlebars=i)}},e.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(t,e,n){"use strict";function i(t){var e=t&&t[0]||1,n=g.COMPILER_REVISION;if(e!==n){if(n>e){var i=g.REVISION_CHANGES[n],r=g.REVISION_CHANGES[e];throw new d["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new d["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function r(t,e){function n(n,i,r){r.hash&&(i=p.extend({},i,r.hash)),n=e.VM.resolvePartial.call(this,n,i,r);var s=e.VM.invokePartial.call(this,n,i,r);if(null==s&&e.compile&&(r.partials[r.name]=e.compile(n,t.compilerOptions,e),s=r.partials[r.name](i,r)),null!=s){if(r.indent){for(var a=s.split("\n"),o=0,l=a.length;l>o&&(a[o]||o+1!==l);o++)a[o]=r.indent+a[o];s=a.join("\n")}return s}throw new d["default"]("The partial "+r.name+" could not be compiled when running in runtime-only mode")}function i(e){var n=void 0===arguments[1]?{}:arguments[1],s=n.data;i._setup(n),!n.partial&&t.useData&&(s=h(e,s));var a=void 0,o=t.useBlockParams?[]:void 0;return t.useDepths&&(a=n.depths?[e].concat(n.depths):[e]),t.main.call(r,e,r.helpers,r.partials,s,o,a)}if(!e)throw new d["default"]("No environment passed to template");if(!t||!t.main)throw new d["default"]("Unknown template object: "+typeof t);e.VM.checkRevision(t.compiler);var r={strict:function(t,e){if(!(e in t))throw new d["default"]('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var n=t.length,i=0;n>i;i++)if(t[i]&&null!=t[i][e])return t[i][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:p.escapeExpression,invokePartial:n,fn:function(e){return t[e]},programs:[],program:function(t,e,n,i,r){var a=this.programs[t],o=this.fn(t);return e||r||i||n?a=s(this,t,o,e,n,i,r):a||(a=this.programs[t]=s(this,t,o)),a},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=p.extend({},e,t)),n},noop:e.VM.noop,compilerInfo:t.compiler};return i.isTop=!0,i._setup=function(n){n.partial?(r.helpers=n.helpers,r.partials=n.partials):(r.helpers=r.merge(n.helpers,e.helpers),t.usePartial&&(r.partials=r.merge(n.partials,e.partials)))},i._child=function(e,n,i,a){if(t.useBlockParams&&!i)throw new d["default"]("must pass block params");if(t.useDepths&&!a)throw new d["default"]("must pass parent depths");return s(r,e,t[e],n,0,i,a)},i}function s(t,e,n,i,r,s,a){function o(e){var r=void 0===arguments[1]?{}:arguments[1];return n.call(t,e,t.helpers,t.partials,r.data||i,s&&[r.blockParams].concat(s),a&&[e].concat(a))}return o.program=e,o.depth=a?a.length:0,o.blockParams=r||0,o}function a(t,e,n){return t?t.call||n.name||(n.name=t,t=n.partials[t]):t=n.partials[n.name],t}function o(t,e,n){if(n.partial=!0,void 0===t)throw new d["default"]("The partial "+n.name+" could not be found");return t instanceof Function?t(e,n):void 0}function l(){return""}function h(t,e){return e&&"root"in e||(e=e?g.createFrame(e):{},e.root=t),e}var c=function(t){return t&&t.__esModule?t:{"default":t}};n.__esModule=!0,n.checkRevision=i,n.template=r,n.wrapProgram=s,n.resolvePartial=a,n.invokePartial=o,n.noop=l;var u=t("./utils"),p=c(u),f=t("./exception"),d=c(f),g=t("./base")},{"./base":6,"./exception":17,"./utils":21}],20:[function(t,e,n){"use strict";function i(t){this.string=t}n.__esModule=!0,i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},n["default"]=i,e.exports=n["default"]},{}],21:[function(t,e,n){"use strict";function i(t){return c[t]}function r(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}function s(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1}function a(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return p.test(t)?t.replace(u,i):t}function o(t){return t||0===t?g(t)&&0===t.length?!0:!1:!0}function l(t,e){return t.path=e,t}function h(t,e){return(t?t+".":"")+e}n.__esModule=!0,n.extend=r,n.indexOf=s,n.escapeExpression=a,n.isEmpty=o,n.blockParams=l,n.appendContextPath=h;var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,p=/[&<>"'`]/,f=Object.prototype.toString;n.toString=f;var d=function(t){return"function"==typeof t};d(/x/)&&(n.isFunction=d=function(t){return"function"==typeof t&&"[object Function]"===f.call(t)});var d;n.isFunction=d;var g=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===f.call(t):!1};n.isArray=g},{}],22:[function(t,e,n){function i(e,n){var i=t("fs"),s=i.readFileSync(n,"utf8");e.exports=r.compile(s)}var r=t("../dist/cjs/handlebars")["default"],s=t("../dist/cjs/handlebars/compiler/printer");r.PrintVisitor=s.PrintVisitor,r.print=s.print,e.exports=r,"undefined"!=typeof t&&t.extensions&&(t.extensions[".handlebars"]=i,t.extensions[".hbs"]=i)},{"../dist/cjs/handlebars":4,"../dist/cjs/handlebars/compiler/printer":14,fs:1}],23:[function(t,e,n){n.SourceMapGenerator=t("./source-map/source-map-generator").SourceMapGenerator,n.SourceMapConsumer=t("./source-map/source-map-consumer").SourceMapConsumer,n.SourceNode=t("./source-map/source-node").SourceNode},{"./source-map/source-map-consumer":29,"./source-map/source-map-generator":30,"./source-map/source-node":31}],24:[function(t,e,n){if("function"!=typeof i)var i=t("amdefine")(e,t);i(function(t,e,n){function i(){this._array=[],this._set={}}var r=t("./util");i.fromArray=function(t,e){for(var n=new i,r=0,s=t.length;s>r;r++)n.add(t[r],e);return n},i.prototype.add=function(t,e){var n=this.has(t),i=this._array.length;(!n||e)&&this._array.push(t),n||(this._set[r.toSetString(t)]=i)},i.prototype.has=function(t){return Object.prototype.hasOwnProperty.call(this._set,r.toSetString(t))},i.prototype.indexOf=function(t){if(this.has(t))return this._set[r.toSetString(t)];throw new Error('"'+t+'" is not in the set.')},i.prototype.at=function(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error("No element indexed by "+t)},i.prototype.toArray=function(){return this._array.slice()},e.ArraySet=i})},{"./util":32,amdefine:33}],25:[function(t,e,n){if("function"!=typeof i)var i=t("amdefine")(e,t);i(function(t,e,n){function i(t){return 0>t?(-t<<1)+1:(t<<1)+0}function r(t){var e=1===(1&t),n=t>>1;return e?-n:n}var s=t("./base64"),a=5,o=1<<a,l=o-1,h=o;e.encode=function(t){var e,n="",r=i(t);do e=r&l,r>>>=a,r>0&&(e|=h),n+=s.encode(e);while(r>0);return n},e.decode=function(t,e){var n,i,o=0,c=t.length,u=0,p=0;do{if(o>=c)throw new Error("Expected more digits in base 64 VLQ value.");i=s.decode(t.charAt(o++)),n=!!(i&h),i&=l,u+=i<<p,p+=a}while(n);e.value=r(u),e.rest=t.slice(o)}})},{"./base64":26,amdefine:33}],26:[function(t,e,n){if("function"!=typeof i)var i=t("amdefine")(e,t);i(function(t,e,n){var i={},r={};"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(function(t,e){i[t]=e,r[e]=t}),e.encode=function(t){if(t in r)return r[t];throw new TypeError("Must be between 0 and 63: "+t)},e.decode=function(t){if(t in i)return i[t];throw new TypeError("Not a valid base 64 digit: "+t)}})},{amdefine:33}],27:[function(t,e,n){if("function"!=typeof i)var i=t("amdefine")(e,t);i(function(t,e,n){function i(t,e,n,r,s){var a=Math.floor((e-t)/2)+t,o=s(n,r[a],!0);return 0===o?a:o>0?e-a>1?i(a,e,n,r,s):a:a-t>1?i(t,a,n,r,s):0>t?-1:t}e.search=function(t,e,n){return 0===e.length?-1:i(-1,e.length,t,e,n)}})},{amdefine:33}],28:[function(t,e,n){if("function"!=typeof i)var i=t("amdefine")(e,t);i(function(t,e,n){function i(t,e){var n=t.generatedLine,i=e.generatedLine,r=t.generatedColumn,a=e.generatedColumn;return i>n||i==n&&a>=r||s.compareByGeneratedPositions(t,e)<=0}function r(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}var s=t("./util");r.prototype.unsortedForEach=function(t,e){this._array.forEach(t,e)},r.prototype.add=function(t){i(this._last,t)?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))},r.prototype.toArray=function(){return this._sorted||(this._array.sort(s.compareByGeneratedPositions),this._sorted=!0),this._array},e.MappingList=r})},{"./util":32,amdefine:33}],29:[function(t,e,n){if("function"!=typeof i)var i=t("amdefine")(e,t);i(function(t,e,n){function i(t){var e=t;"string"==typeof t&&(e=JSON.parse(t.replace(/^\)\]\}'/,"")));var n=r.getArg(e,"version"),i=r.getArg(e,"sources"),s=r.getArg(e,"names",[]),o=r.getArg(e,"sourceRoot",null),l=r.getArg(e,"sourcesContent",null),h=r.getArg(e,"mappings"),c=r.getArg(e,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);i=i.map(r.normalize),this._names=a.fromArray(s,!0),this._sources=a.fromArray(i,!0),this.sourceRoot=o,this.sourcesContent=l,this._mappings=h,this.file=c}var r=t("./util"),s=t("./binary-search"),a=t("./array-set").ArraySet,o=t("./base64-vlq");i.fromSourceMap=function(t){var e=Object.create(i.prototype);return e._names=a.fromArray(t._names.toArray(),!0),e._sources=a.fromArray(t._sources.toArray(),!0),e.sourceRoot=t._sourceRoot,e.sourcesContent=t._generateSourcesContent(e._sources.toArray(),e.sourceRoot),e.file=t._file,e.__generatedMappings=t._mappings.toArray().slice(),e.__originalMappings=t._mappings.toArray().slice().sort(r.compareByOriginalPositions),e},i.prototype._version=3,Object.defineProperty(i.prototype,"sources",{get:function(){return this._sources.toArray().map(function(t){return null!=this.sourceRoot?r.join(this.sourceRoot,t):t},this)}}),i.prototype.__generatedMappings=null,Object.defineProperty(i.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__generatedMappings}}),i.prototype.__originalMappings=null,Object.defineProperty(i.prototype,"_originalMappings",{get:function(){return this.__originalMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__originalMappings}}),i.prototype._nextCharIsMappingSeparator=function(t){var e=t.charAt(0);return";"===e||","===e},i.prototype._parseMappings=function(t,e){for(var n,i=1,s=0,a=0,l=0,h=0,c=0,u=t,p={};u.length>0;)if(";"===u.charAt(0))i++,u=u.slice(1),s=0;else if(","===u.charAt(0))u=u.slice(1);else{if(n={},n.generatedLine=i,o.decode(u,p),n.generatedColumn=s+p.value,s=n.generatedColumn,u=p.rest,u.length>0&&!this._nextCharIsMappingSeparator(u)){if(o.decode(u,p),n.source=this._sources.at(h+p.value),h+=p.value,u=p.rest,0===u.length||this._nextCharIsMappingSeparator(u))throw new Error("Found a source, but no line and column");if(o.decode(u,p),n.originalLine=a+p.value,a=n.originalLine,n.originalLine+=1,u=p.rest,0===u.length||this._nextCharIsMappingSeparator(u))throw new Error("Found a source and line, but no column");o.decode(u,p),n.originalColumn=l+p.value,l=n.originalColumn,u=p.rest,u.length>0&&!this._nextCharIsMappingSeparator(u)&&(o.decode(u,p),n.name=this._names.at(c+p.value),c+=p.value,u=p.rest)}this.__generatedMappings.push(n),"number"==typeof n.originalLine&&this.__originalMappings.push(n)}this.__generatedMappings.sort(r.compareByGeneratedPositions),this.__originalMappings.sort(r.compareByOriginalPositions)},i.prototype._findMapping=function(t,e,n,i,r){if(t[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+t[n]);if(t[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+t[i]);return s.search(t,e,r)},i.prototype.computeColumnSpans=function(){for(var t=0;t<this._generatedMappings.length;++t){var e=this._generatedMappings[t];if(t+1<this._generatedMappings.length){var n=this._generatedMappings[t+1];if(e.generatedLine===n.generatedLine){e.lastGeneratedColumn=n.generatedColumn-1;continue}}e.lastGeneratedColumn=1/0}},i.prototype.originalPositionFor=function(t){var e={generatedLine:r.getArg(t,"line"),generatedColumn:r.getArg(t,"column")},n=this._findMapping(e,this._generatedMappings,"generatedLine","generatedColumn",r.compareByGeneratedPositions);if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===e.generatedLine){var s=r.getArg(i,"source",null);return null!=s&&null!=this.sourceRoot&&(s=r.join(this.sourceRoot,s)),{source:s,line:r.getArg(i,"originalLine",null),column:r.getArg(i,"originalColumn",null),name:r.getArg(i,"name",null)}}}return{source:null,line:null,column:null,name:null}},i.prototype.sourceContentFor=function(t){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(t=r.relative(this.sourceRoot,t)),this._sources.has(t))return this.sourcesContent[this._sources.indexOf(t)];var e;if(null!=this.sourceRoot&&(e=r.urlParse(this.sourceRoot))){var n=t.replace(/^file:\/\//,"");if("file"==e.scheme&&this._sources.has(n))return this.sourcesContent[this._sources.indexOf(n)];if((!e.path||"/"==e.path)&&this._sources.has("/"+t))return this.sourcesContent[this._sources.indexOf("/"+t)]}throw new Error('"'+t+'" is not in the SourceMap.')},i.prototype.generatedPositionFor=function(t){var e={source:r.getArg(t,"source"),originalLine:r.getArg(t,"line"),originalColumn:r.getArg(t,"column")};null!=this.sourceRoot&&(e.source=r.relative(this.sourceRoot,e.source));var n=this._findMapping(e,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions);if(n>=0){var i=this._originalMappings[n];return{line:r.getArg(i,"generatedLine",null),column:r.getArg(i,"generatedColumn",null),lastColumn:r.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},i.prototype.allGeneratedPositionsFor=function(t){var e={source:r.getArg(t,"source"),originalLine:r.getArg(t,"line"),originalColumn:1/0};null!=this.sourceRoot&&(e.source=r.relative(this.sourceRoot,e.source));var n=[],i=this._findMapping(e,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions);if(i>=0)for(var s=this._originalMappings[i];s&&s.originalLine===e.originalLine;)n.push({line:r.getArg(s,"generatedLine",null),column:r.getArg(s,"generatedColumn",null),lastColumn:r.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[--i];return n.reverse()},i.GENERATED_ORDER=1,i.ORIGINAL_ORDER=2,i.prototype.eachMapping=function(t,e,n){var s,a=e||null,o=n||i.GENERATED_ORDER;switch(o){case i.GENERATED_ORDER:s=this._generatedMappings;break;case i.ORIGINAL_ORDER:s=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var l=this.sourceRoot;s.map(function(t){var e=t.source;return null!=e&&null!=l&&(e=r.join(l,e)),{source:e,generatedLine:t.generatedLine,generatedColumn:t.generatedColumn,originalLine:t.originalLine,originalColumn:t.originalColumn,name:t.name}}).forEach(t,a)},e.SourceMapConsumer=i})},{"./array-set":24,"./base64-vlq":25,"./binary-search":27,"./util":32,amdefine:33}],30:[function(t,e,n){if("function"!=typeof i)var i=t("amdefine")(e,t);i(function(t,e,n){function i(t){t||(t={}),this._file=s.getArg(t,"file",null),this._sourceRoot=s.getArg(t,"sourceRoot",null),this._skipValidation=s.getArg(t,"skipValidation",!1),this._sources=new a,this._names=new a,this._mappings=new o,this._sourcesContents=null}var r=t("./base64-vlq"),s=t("./util"),a=t("./array-set").ArraySet,o=t("./mapping-list").MappingList;i.prototype._version=3,i.fromSourceMap=function(t){var e=t.sourceRoot,n=new i({file:t.file,sourceRoot:e});return t.eachMapping(function(t){var i={generated:{line:t.generatedLine,column:t.generatedColumn}};null!=t.source&&(i.source=t.source,null!=e&&(i.source=s.relative(e,i.source)),i.original={line:t.originalLine,column:t.originalColumn},null!=t.name&&(i.name=t.name)),n.addMapping(i)}),t.sources.forEach(function(e){var i=t.sourceContentFor(e);null!=i&&n.setSourceContent(e,i)}),n},i.prototype.addMapping=function(t){var e=s.getArg(t,"generated"),n=s.getArg(t,"original",null),i=s.getArg(t,"source",null),r=s.getArg(t,"name",null);this._skipValidation||this._validateMapping(e,n,i,r),null==i||this._sources.has(i)||this._sources.add(i),null==r||this._names.has(r)||this._names.add(r),this._mappings.add({generatedLine:e.line,generatedColumn:e.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:i,name:r})},i.prototype.setSourceContent=function(t,e){var n=t;null!=this._sourceRoot&&(n=s.relative(this._sourceRoot,n)),null!=e?(this._sourcesContents||(this._sourcesContents={}),this._sourcesContents[s.toSetString(n)]=e):this._sourcesContents&&(delete this._sourcesContents[s.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},i.prototype.applySourceMap=function(t,e,n){var i=e;if(null==e){if(null==t.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');i=t.file}var r=this._sourceRoot;null!=r&&(i=s.relative(r,i));var o=new a,l=new a;this._mappings.unsortedForEach(function(e){if(e.source===i&&null!=e.originalLine){var a=t.originalPositionFor({line:e.originalLine,column:e.originalColumn});null!=a.source&&(e.source=a.source,null!=n&&(e.source=s.join(n,e.source)),null!=r&&(e.source=s.relative(r,e.source)),e.originalLine=a.line,e.originalColumn=a.column,null!=a.name&&(e.name=a.name))}var h=e.source;null==h||o.has(h)||o.add(h);var c=e.name;null==c||l.has(c)||l.add(c)},this),this._sources=o,this._names=l,t.sources.forEach(function(e){var i=t.sourceContentFor(e);null!=i&&(null!=n&&(e=s.join(n,e)),null!=r&&(e=s.relative(r,e)),this.setSourceContent(e,i))},this)},i.prototype._validateMapping=function(t,e,n,i){if((!(t&&"line"in t&&"column"in t&&t.line>0&&t.column>=0)||e||n||i)&&!(t&&"line"in t&&"column"in t&&e&&"line"in e&&"column"in e&&t.line>0&&t.column>=0&&e.line>0&&e.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:t,source:n,original:e,name:i}))},i.prototype._serializeMappings=function(){for(var t,e=0,n=1,i=0,a=0,o=0,l=0,h="",c=this._mappings.toArray(),u=0,p=c.length;p>u;u++){if(t=c[u],t.generatedLine!==n)for(e=0;t.generatedLine!==n;)h+=";",n++;else if(u>0){if(!s.compareByGeneratedPositions(t,c[u-1]))continue;h+=","}h+=r.encode(t.generatedColumn-e),e=t.generatedColumn,null!=t.source&&(h+=r.encode(this._sources.indexOf(t.source)-l),l=this._sources.indexOf(t.source),h+=r.encode(t.originalLine-1-a),a=t.originalLine-1,h+=r.encode(t.originalColumn-i),i=t.originalColumn,null!=t.name&&(h+=r.encode(this._names.indexOf(t.name)-o),o=this._names.indexOf(t.name)))}return h},i.prototype._generateSourcesContent=function(t,e){return t.map(function(t){if(!this._sourcesContents)return null;null!=e&&(t=s.relative(e,t));var n=s.toSetString(t);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)},i.prototype.toJSON=function(){var t={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(t.file=this._file),null!=this._sourceRoot&&(t.sourceRoot=this._sourceRoot),this._sourcesContents&&(t.sourcesContent=this._generateSourcesContent(t.sources,t.sourceRoot)),t},i.prototype.toString=function(){return JSON.stringify(this)},e.SourceMapGenerator=i})},{"./array-set":24,"./base64-vlq":25,"./mapping-list":28,"./util":32,amdefine:33}],31:[function(t,e,n){if("function"!=typeof i)var i=t("amdefine")(e,t);i(function(t,e,n){function i(t,e,n,i,r){this.children=[],this.sourceContents={},this.line=null==t?null:t,this.column=null==e?null:e,this.source=null==n?null:n,this.name=null==r?null:r,this[l]=!0,null!=i&&this.add(i)}var r=t("./source-map-generator").SourceMapGenerator,s=t("./util"),a=/(\r?\n)/,o=10,l="$$$isSourceNode$$$";i.fromStringWithSourceMap=function(t,e,n){function r(t,e){if(null===t||void 0===t.source)o.add(e);else{var r=n?s.join(n,t.source):t.source;o.add(new i(t.originalLine,t.originalColumn,r,e,t.name))}}var o=new i,l=t.split(a),h=function(){var t=l.shift(),e=l.shift()||"";return t+e},c=1,u=0,p=null;return e.eachMapping(function(t){if(null!==p){if(!(c<t.generatedLine)){var e=l[0],n=e.substr(0,t.generatedColumn-u);return l[0]=e.substr(t.generatedColumn-u),u=t.generatedColumn,r(p,n),void(p=t)}var n="";r(p,h()),c++,u=0}for(;c<t.generatedLine;)o.add(h()),c++;if(u<t.generatedColumn){var e=l[0];o.add(e.substr(0,t.generatedColumn)),l[0]=e.substr(t.generatedColumn),u=t.generatedColumn}p=t},this),l.length>0&&(p&&r(p,h()),o.add(l.join(""))),e.sources.forEach(function(t){var i=e.sourceContentFor(t);null!=i&&(null!=n&&(t=s.join(n,t)),o.setSourceContent(t,i))}),o},i.prototype.add=function(t){if(Array.isArray(t))t.forEach(function(t){this.add(t)},this);else{if(!t[l]&&"string"!=typeof t)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);t&&this.children.push(t)}return this},i.prototype.prepend=function(t){if(Array.isArray(t))for(var e=t.length-1;e>=0;e--)this.prepend(t[e]);else{if(!t[l]&&"string"!=typeof t)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);this.children.unshift(t)}return this},i.prototype.walk=function(t){for(var e,n=0,i=this.children.length;i>n;n++)e=this.children[n],e[l]?e.walk(t):""!==e&&t(e,{source:this.source,line:this.line,column:this.column,name:this.name})},i.prototype.join=function(t){var e,n,i=this.children.length;if(i>0){for(e=[],n=0;i-1>n;n++)e.push(this.children[n]),e.push(t);e.push(this.children[n]),this.children=e}return this},i.prototype.replaceRight=function(t,e){var n=this.children[this.children.length-1];return n[l]?n.replaceRight(t,e):"string"==typeof n?this.children[this.children.length-1]=n.replace(t,e):this.children.push("".replace(t,e)),this},i.prototype.setSourceContent=function(t,e){this.sourceContents[s.toSetString(t)]=e},i.prototype.walkSourceContents=function(t){for(var e=0,n=this.children.length;n>e;e++)this.children[e][l]&&this.children[e].walkSourceContents(t);for(var i=Object.keys(this.sourceContents),e=0,n=i.length;n>e;e++)t(s.fromSetString(i[e]),this.sourceContents[i[e]])},i.prototype.toString=function(){var t="";return this.walk(function(e){t+=e}),t},i.prototype.toStringWithSourceMap=function(t){var e={code:"",line:1,column:0},n=new r(t),i=!1,s=null,a=null,l=null,h=null;return this.walk(function(t,r){e.code+=t,null!==r.source&&null!==r.line&&null!==r.column?((s!==r.source||a!==r.line||l!==r.column||h!==r.name)&&n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:e.line,column:e.column},name:r.name}),s=r.source,a=r.line,l=r.column,h=r.name,i=!0):i&&(n.addMapping({generated:{line:e.line,column:e.column}}),s=null,i=!1);for(var c=0,u=t.length;u>c;c++)t.charCodeAt(c)===o?(e.line++,e.column=0,c+1===u?(s=null,i=!1):i&&n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:e.line,column:e.column},name:r.name})):e.column++}),this.walkSourceContents(function(t,e){n.setSourceContent(t,e)}),{code:e.code,map:n}},e.SourceNode=i})},{"./source-map-generator":30,"./util":32,amdefine:33}],32:[function(t,e,n){if("function"!=typeof i)var i=t("amdefine")(e,t);i(function(t,e,n){function i(t,e,n){if(e in t)return t[e];if(3===arguments.length)return n;throw new Error('"'+e+'" is a required argument.')}function r(t){var e=t.match(d);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}function s(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}function a(t){var e=t,n=r(t);if(n){if(!n.path)return t;e=n.path}for(var i,a="/"===e.charAt(0),o=e.split(/\/+/),l=0,h=o.length-1;h>=0;h--)i=o[h],"."===i?o.splice(h,1):".."===i?l++:l>0&&(""===i?(o.splice(h+1,l),l=0):(o.splice(h,2),l--));return e=o.join("/"),""===e&&(e=a?"/":"."),n?(n.path=e,s(n)):e}function o(t,e){""===t&&(t="."),""===e&&(e=".");var n=r(e),i=r(t);if(i&&(t=i.path||"/"),n&&!n.scheme)return i&&(n.scheme=i.scheme),s(n);if(n||e.match(g))return e;if(i&&!i.host&&!i.path)return i.host=e,s(i);var o="/"===e.charAt(0)?e:a(t.replace(/\/+$/,"")+"/"+e);return i?(i.path=o,s(i)):o}function l(t,e){""===t&&(t="."),t=t.replace(/\/$/,"");var n=r(t);return"/"==e.charAt(0)&&n&&"/"==n.path?e.slice(1):0===e.indexOf(t+"/")?e.substr(t.length+1):e}function h(t){return"$"+t}function c(t){return t.substr(1)}function u(t,e){var n=t||"",i=e||"";return(n>i)-(i>n)}function p(t,e,n){var i;return(i=u(t.source,e.source))?i:(i=t.originalLine-e.originalLine)?i:(i=t.originalColumn-e.originalColumn,i||n?i:(i=u(t.name,e.name))?i:(i=t.generatedLine-e.generatedLine,i?i:t.generatedColumn-e.generatedColumn))}function f(t,e,n){var i;return(i=t.generatedLine-e.generatedLine)?i:(i=t.generatedColumn-e.generatedColumn,i||n?i:(i=u(t.source,e.source))?i:(i=t.originalLine-e.originalLine)?i:(i=t.originalColumn-e.originalColumn,i?i:u(t.name,e.name)))}e.getArg=i;var d=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,g=/^data:.+\,.+$/;e.urlParse=r,e.urlGenerate=s,e.normalize=a,e.join=o,e.relative=l,e.toSetString=h,e.fromSetString=c,e.compareByOriginalPositions=p,e.compareByGeneratedPositions=f})},{amdefine:33}],33:[function(t,e,n){(function(n,i){"use strict";function r(e,r){function s(t){var e,n;for(e=0;t[e];e+=1)if(n=t[e],"."===n)t.splice(e,1),e-=1;else if(".."===n){if(1===e&&(".."===t[2]||".."===t[0]))break;e>0&&(t.splice(e-1,2),e-=2)}}function a(t,e){var n;return t&&"."===t.charAt(0)&&e&&(n=e.split("/"),n=n.slice(0,n.length-1),n=n.concat(t.split("/")),s(n),t=n.join("/")),t}function o(t){return function(e){return a(e,t)}}function l(t){function e(e){d[t]=e}return e.fromText=function(t,e){throw new Error("amdefine does not implement load.fromText")},e}function h(t,n,s){var a,o,l,h;if(t)o=d[t]={},l={id:t,uri:i,exports:o},a=u(r,o,l,t);else{if(g)throw new Error("amdefine with no module ID cannot be called more than once per file.");g=!0,o=e.exports,l=e,a=u(r,o,l,e.id)}n&&(n=n.map(function(t){return a(t)})),h="function"==typeof s?s.apply(l.exports,n):s,void 0!==h&&(l.exports=h,t&&(d[t]=l.exports))}function c(t,e,n){Array.isArray(t)?(n=e,e=t,t=void 0):"string"!=typeof t&&(n=t,t=e=void 0),e&&!Array.isArray(e)&&(n=e,e=void 0),e||(e=["require","exports","module"]),t?f[t]=[t,e,n]:h(t,e,n)}var u,p,f={},d={},g=!1,m=t("path");return u=function(t,e,i,r){function s(s,a){return"string"==typeof s?p(t,e,i,s,r):(s=s.map(function(n){return p(t,e,i,n,r)}),void(a&&n.nextTick(function(){a.apply(null,s)})))}return s.toUrl=function(t){return 0===t.indexOf(".")?a(t,m.dirname(i.filename)):t},s},r=r||function(){return e.require.apply(e,arguments)},p=function(t,e,n,i,r){var s,c,g=i.indexOf("!"),m=i;if(-1===g){if(i=a(i,r),"require"===i)return u(t,e,n,r);if("exports"===i)return e;if("module"===i)return n;if(d.hasOwnProperty(i))return d[i];if(f[i])return h.apply(null,f[i]),d[i];if(t)return t(m);throw new Error("No module with ID: "+i)}return s=i.substring(0,g),i=i.substring(g+1,i.length),c=p(t,e,n,s,r),i=c.normalize?c.normalize(i,o(r)):a(i,r),d[i]?d[i]:(c.load(i,u(t,e,n,r),l(i),{}),d[i])},c.require=function(t){return d[t]?d[t]:f[t]?(h.apply(null,f[t]),d[t]):void 0},c.amd={},c}e.exports=r}).call(this,t("_process"),"/node_modules/handlebars/node_modules/source-map/node_modules/amdefine/amdefine.js")},{_process:3,path:2}],34:[function(t,e,n){function i(){this._handlers={},this._omniHandlers=[],this._boundForwardEvent=this._forwardEvent.bind(this)}t("../util/util");i.prototype.on=function(t,e){null===t?this._omniHandlers.indexOf(e)<0&&this._omniHandlers.push(e):t.split(" ").forEach(function(t){var n=this._handlers[t];n||(n=[],this._handlers[t]=n),n.indexOf(e)<0&&n.push(e)}.bind(this))},i.prototype.off=function(t,e){if(null===t)if(e){var n=this._omniHandlers.indexOf(e);n>=0&&this._omniHandlers.splice(n,1)}else this._omniHandlers.length=0;else t.split(" ").forEach(function(t){var n=this._handlers[t];if(n)if(e){var i=n.indexOf(e);i>=0&&n.splice(i,1)}else delete this._handlers[t]}.bind(this))},i.prototype.handlers=function(t,e){var n=(this._handlers[t]||[]).slice(0);return e||n.push.apply(n,this._omniHandlers),n},i.prototype.emit=function(t,e){var n=this._handlers[t];if(n||this._omniHandlers.length>0){var i=arguments,r=this;if(n){var s=Array.prototype.slice.call(i,1);n.forEach(function(t){t.apply(r,s)})}this._omniHandlers.forEach(function(t){t.apply(r,i)})}},i.prototype.forward=function(t){t.on(null,this._boundForwardEvent)},i.prototype.unforward=function(t){t.off(null,this._boundForwardEvent)},i.prototype.destroy=function(){delete this._handlers,delete this._omniHandlers,delete this._boundForwardEvent},i.prototype._forwardEvent=function(t,e){this.emit.apply(this,arguments)},e.exports=i},{"../util/util":56}],35:[function(t,e,n){function i(t,e,n){r.call(this),this.parentGroup=e,this._spec=n,this._spec.id=s.randomId(),this._container=t,this._element=null}var r=(t("../../util/util"),t("../IBindable")),s=t("../../util/util");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,
Object.defineProperty(i.prototype,"key",{get:function(){throw new Error("not implemented")}}),Object.defineProperty(i.prototype,"value",{get:function(){throw new Error("not implemented")}}),Object.defineProperty(i.prototype,"container",{get:function(){return this._container},set:function(t){t!==this._container&&this._element&&this._element.remove(),t&&this._element&&t.append(this._element),this._container=t}}),Object.defineProperty(i.prototype,"abbreviated",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")}}),Object.defineProperty(i.prototype,"visible",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")}}),i.prototype.updateSpec=function(t){throw new Error("not implemented")},i.prototype.select=function(t){throw new Error("not implemented")},i.prototype.deselect=function(){throw new Error("not implemented")},i.prototype.destroy=function(t){r.prototype.destroy.call(this)},i.prototype._addHandlers=function(){throw new Error("not implemented")},i.prototype._removeHandlers=function(){throw new Error("not implemented")},i.prototype._setupHandlers=function(){this._removeHandlers(),this._addHandlers()},e.exports=i},{"../../util/util":56,"../IBindable":34}],36:[function(t,e,n){function i(t,e){this._svg=t,this._spec=e,this._totalWidth=0,this._barWidth=0,this._minBarWidth="minBarWidth"in e?e.minBarWidth:3,this._maxBarWidth="maxBarWidth"in e?e.maxBarWidth:Number.MAX_VALUE,this._barPadding="barPadding"in e?e.barPadding:1,this._bars=[],this.initializeSlices(t,e.slices,e.yMax)}var r=t("./facetHistogramBar");Object.defineProperty(i.prototype,"totalWidth",{get:function(){return this._totalWidth}}),Object.defineProperty(i.prototype,"barWidth",{get:function(){return this._barWidth}}),Object.defineProperty(i.prototype,"barPadding",{get:function(){return this._barPadding}}),Object.defineProperty(i.prototype,"bars",{get:function(){return this._bars}}),i.prototype.initializeSlices=function(t,e,n){var i=t.width(),s=t.height(),a=this._minBarWidth,o=this._maxBarWidth,l=this._barPadding,h=0,c=e.length,u=Math.floor(i/(a+l)),p=Math.ceil(c/u),f=Math.ceil(c/p),d=Math.floor((i-(f-1)*l)/f);d=Math.max(d,a),d=Math.min(d,o),this._barWidth=d;for(var g=0;c>g;g+=p){for(var m=[],_=0,v=0;p>v&&c>g+v;++v){var y=e[g+v];_=Math.max(_,y.count),m.push(y)}var b=Math.ceil(s*(_/n)),k=new r(t,h,d,b,s);k.highlighted=!1,k.metadata=m,this._bars.push(k),h+=d+l}this._totalWidth=h-l},i.prototype.pixelRangeToBarRange=function(t){return{from:Math.min(this._bars.length-1,Math.max(0,Math.round(t.from/(this._barWidth+this._barPadding)))),to:Math.min(this._bars.length-1,Math.max(0,Math.round((t.to-this._barWidth)/(this._barWidth+this._barPadding))))}},i.prototype.barRangeToPixelRange=function(t){return{from:t.from*(this._barWidth+this._barPadding),to:t.to*(this._barWidth+this._barPadding)+this._barWidth}},i.prototype.highlightRange=function(t){for(var e=this._bars,n=0,i=e.length;i>n;++n)e[n].highlighted=n>=t.from&&n<=t.to},i.prototype.select=function(t){for(var e=this._bars,n=this._spec.yMax,i=this._svg.height(),r=0,s=e.length;s>r;++r)for(var a=e[r],o=a.metadata,l=0,h=o.length;h>l;++l){var c=o[l],u=0;c.label in t&&(u=t[c.label]);var p=Math.ceil(i*(u/n));null===a.selectedHeight?a.selectedHeight=p:a.selectedHeight=Math.max(a.selectedHeight,p)}},i.prototype.deselect=function(){for(var t=this._bars,e=0,n=t.length;n>e;++e)t[e].selectedHeight=null},e.exports=i},{"./facetHistogramBar":37}],37:[function(t,e,n){function i(t,e,n,i,r){this._metadata=null,this._highlighted=!1,this._groupElement=$(document.createElementNS("http://www.w3.org/2000/svg","g")),this._groupElement.attr("transform","translate(0, "+r+"), scale(1, -1)"),this._groupElement.css("transform","translate(0, "+r+"px) scale(1, -1)"),t.append(this._groupElement),this._backElement=$(document.createElementNS("http://www.w3.org/2000/svg","rect")),this._backElement.addClass("facet-histogram-bar"),this._backElement.addClass("facet-histogram-bar-transform"),this._groupElement.append(this._backElement),this._element=$(document.createElementNS("http://www.w3.org/2000/svg","rect")),this._element.addClass("facet-histogram-bar"),this._element.addClass("facet-histogram-bar-transform"),this._groupElement.append(this._element),this._selectedHeight=null,this.x=e,this.y=0,this.width=n,this.height=0,this.height=i,this._onMouseEnterHandler=null,this._onMouseLeaveHandler=null,this._onClickHandler=null}Object.defineProperty(i.prototype,"x",{get:function(){return this._x},set:function(t){this._element.attr("x",t),this._backElement.attr("x",t),this._x=t}}),Object.defineProperty(i.prototype,"y",{get:function(){return this._y},set:function(t){this._element.attr("y",t),this._backElement.attr("y",t),this._y=t}}),Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(t){this._element.attr("width",t),this._backElement.attr("width",t),this._width=t}}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(t){null===this._selectedHeight&&(this._element.attr("height",t),this._element.css("height",t),this._element.css("height")),this._backElement.attr("height",t),this._backElement.css("height",t),this._backElement.css("height"),this._height=t}}),Object.defineProperty(i.prototype,"selectedHeight",{get:function(){return this._selectedHeight},set:function(t){null!==t?(this._element.attr("height",t),this._element.css("height",t),this._element.css("height")):(this._element.attr("height",this._height),this._element.css("height",this._height),this._element.css("height")),this._selectedHeight=t}}),Object.defineProperty(i.prototype,"metadata",{get:function(){return this._metadata},set:function(t){this._metadata=t}}),Object.defineProperty(i.prototype,"info",{get:function(){return{label:this._metadata.map(function(t){return t.label}),count:this._metadata.map(function(t){return t.count}),metadata:this._metadata.map(function(t){return t.metadata})}}}),Object.defineProperty(i.prototype,"highlighted",{get:function(){return this._highlighted},set:function(t){t!==this._highlighted&&this._element.toggleClass("facet-histogram-bar facet-histogram-bar-highlighted"),this._highlighted=t}}),Object.defineProperty(i.prototype,"onMouseEnter",{get:function(){return this._onMouseEnterHandler},set:function(t){"function"==typeof t?this._onMouseEnterHandler=t:this._onMouseEnterHandler=null}}),Object.defineProperty(i.prototype,"onMouseLeave",{get:function(){return this._onMouseLeaveHandler},set:function(t){"function"==typeof t?this._onMouseLeaveHandler=t:this._onMouseLeaveHandler=null}}),Object.defineProperty(i.prototype,"onClick",{get:function(){return this._onClickHandler},set:function(t){"function"==typeof t?this._onClickHandler=t:this._onClickHandler=null}}),i.prototype._addHandlers=function(){this._element.hover(this._onMouseEnter.bind(this),this._onMouseLeave.bind(this)),this._element.click(this._onClick.bind(this)),this._backElement.hover(this._onMouseEnter.bind(this),this._onMouseLeave.bind(this)),this._backElement.click(this._onClick.bind(this))},i.prototype._removeHandlers=function(){this._element.unbind("click"),this._element.unbind("hover"),this._backElement.unbind("click"),this._backElement.unbind("hover")},i.prototype._onMouseEnter=function(t){t.preventDefault(),t.stopPropagation(),this._onMouseEnterHandler&&this._onMouseEnterHandler(this,t)},i.prototype._onMouseLeave=function(t){t.preventDefault(),t.stopPropagation(),this._onMouseLeaveHandler&&this._onMouseLeaveHandler(this,t)},i.prototype._onClick=function(t){t.preventDefault(),t.stopPropagation(),this._onClickHandler&&this._onClickHandler(this,t)},e.exports=i},{}],38:[function(t,e,n){function i(t,e){this._element=t,this._histogram=e,this._rangeFilter=t.find(".facet-range-filter"),this._leftHandle=this._rangeFilter.find(".facet-range-filter-left"),this._rightHandle=this._rangeFilter.find(".facet-range-filter-right"),this._currentRangeLabel=t.find(".facet-range-current"),this._pageLeft=t.find(".facet-page-left"),this._pageRight=t.find(".facet-page-right"),this._draggingLeft=!1,this._draggingLeftX=0,this._canDragLeft=!1,this._draggingRight=!1,this._draggingRightX=0,this._canDragRight=!1,this._pixelRange={from:0,to:0},this._barRange={from:0,to:0},this._maxBarRange={from:0,to:e.bars.length-1},this._onFilterChanged=null,this._initializeDragging(),this._initializePagination(),this._rangeFilter.removeClass("facet-range-filter-init")}Object.defineProperty(i.prototype,"onFilterChanged",{get:function(){return this._onFilterChanged},set:function(t){"function"==typeof t?this._onFilterChanged=t:this._onFilterChanged=null}}),Object.defineProperty(i.prototype,"barRange",{get:function(){return this._barRange},set:function(t){this.setFilterBarRange(t,!1)}}),Object.defineProperty(i.prototype,"pixelRange",{get:function(){return this._pixelRange},set:function(t){this.setFilterPixelRange(t,!1)}}),i.prototype._initializeDragging=function(){var t=function(t,e,n,i){t.from=Math.max(0,t.from+e),t.from>t.to-n&&(t.from+n<i?t.to=t.from+n:(t.from=i-n,t.to=i))},e=function(t,e,n,i){t.to=Math.min(i,t.to+e),t.to<t.from+n&&(t.to-n>0?t.from=t.to-n:(t.from=0,t.to=n))},n=this._histogram.barWidth,i=this._histogram.totalWidth,r=function(r){if(this._draggingLeft||this._draggingRight){r.preventDefault();var s={from:this._pixelRange.from,to:this._pixelRange.to};return this._draggingLeft&&(this._canDragLeft=!1,this._draggingLeft=!1,t(s,r.clientX-this._draggingLeftX,n,i)),this._draggingRight&&(this._canDragRight=!1,this._draggingRight=!1,e(s,r.clientX-this._draggingRightX,n,i)),this.setFilterPixelRange(s,!0),!1}return!0}.bind(this);this._element.mouseleave(r),this._element.mouseup(r),this._element.mousemove(function(r){if(this._canDragLeft||this._canDragRight){var s={from:this._pixelRange.from,to:this._pixelRange.to};this._canDragLeft&&(this._draggingLeft||(this._draggingLeft=!0),t(s,r.clientX-this._draggingLeftX,n,i)),this._canDragRight&&(this._draggingRight||(this._draggingRight=!0),e(s,r.clientX-this._draggingRightX,n,i));var a=this._histogram.pixelRangeToBarRange(s);this.updateUI(a,s)}}.bind(this)),this._leftHandle.mousedown(function(t){return t.preventDefault(),this._canDragLeft=!0,this._draggingLeft=!1,this._draggingLeftX=t.clientX,!1}.bind(this)),this._rightHandle.mousedown(function(t){return t.preventDefault(),this._canDragRight=!0,this._draggingRight=!1,this._draggingRightX=t.clientX,!1}.bind(this))},i.prototype._initializePagination=function(){this._pageLeft.click(function(){var t=this._barRange.from,e=this._barRange.to,n=this._maxBarRange.from;if(t>n){var i=e-t+1;n>t-i&&(i=t-n),this.setFilterBarRange({from:t-i,to:e-i},!0)}}.bind(this)),this._pageRight.click(function(){var t=this._barRange.from,e=this._barRange.to,n=this._maxBarRange.to;if(n>e){var i=e-t+1;e+i>n&&(i=n-e),this.setFilterBarRange({from:t+i,to:e+i},!0)}}.bind(this))},i.prototype.setFilterPixelRange=function(t,e){this.setFilterBarRange(this._histogram.pixelRangeToBarRange(t),e)},i.prototype.setFilterBarRange=function(t,e){var n=this._histogram.barRangeToPixelRange(t);this._pixelRange=n,this._barRange=t,this.updateUI(t,n),this._onFilterChanged&&this._onFilterChanged(t,e)},i.prototype.updateUI=function(t,e){var n=this._histogram.bars,i=n[t.from].metadata,r=n[t.to].metadata;this._currentRangeLabel.text(i[0].label+" - "+r[r.length-1].label),this._histogram.highlightRange(t),this._rangeFilter.css("left",e.from),this._rangeFilter.css("width",e.to-e.from),t.from===this._maxBarRange.from&&t.to===this._maxBarRange.to?this._currentRangeLabel.addClass("facet-range-current-hidden"):this._currentRangeLabel.removeClass("facet-range-current-hidden"),t.from===this._maxBarRange.from?this._pageLeft.addClass("facet-page-ctrl-disabled"):this._pageLeft.removeClass("facet-page-ctrl-disabled"),t.to===this._maxBarRange.to?this._pageRight.addClass("facet-page-ctrl-disabled"):this._pageRight.removeClass("facet-page-ctrl-disabled")},e.exports=i},{}],39:[function(t,e,n){function i(t,e,n){r.call(this,t,e,n),this._key=n.key,this._spec=this.processSpec(n),this._initializeLayout(o),this.select(n),this._setupHandlers(),this._element.on("transitionend",this._handleTransitionEnd.bind(this))}var r=(t("../../util/util"),t("./facet")),s=t("./facetHistogram"),a=t("./facetHistogramFilter"),o=t("../../templates/facetHorizontal"),l="facets-facet-horizontal-abbreviated",h="facets-facet-horizontal-hidden";i.prototype=Object.create(r.prototype),i.prototype.constructor=i,Object.defineProperty(i.prototype,"key",{get:function(){return this._key}}),Object.defineProperty(i.prototype,"value",{get:function(){return this._key}}),Object.defineProperty(i.prototype,"abbreviated",{get:function(){return this._element.hasClass(l)},set:function(t){t!==this.abbreviated&&(t?(this._element.addClass(l),this._removeHandlers()):(this._element.removeClass(l),this._addHandlers()))}}),Object.defineProperty(i.prototype,"visible",{get:function(){return!this._element.hasClass(h)},set:function(t){t!==this.visible&&(t?(this._element.removeClass(h),this._addHandlers()):(this._element.addClass(h),this._removeHandlers()))}}),Object.defineProperty(i.prototype,"filterRange",{get:function(){var t=this._histogramFilter.barRange,e=this._histogramFilter.pixelRange,n=this._histogram.bars[t.from].info,i=this._histogram.bars[t.to].info;return{from:{index:t.from,pixel:e.from,label:n.label,count:n.count,metadata:n.metadata},to:{index:t.to,pixel:e.to,label:i.label,count:i.count,metadata:i.metadata}}}}),i.prototype.select=function(t){if(t&&"selection"in t){var e=t.selection;if("range"in e){for(var n=e.range.from,i=e.range.to,r="string"==typeof n||"object"==typeof n&&n.constructor===String,s="string"==typeof i||"object"==typeof i&&i.constructor===String,a=this._histogram.bars,o=0,l=a.length;l>o&&(r||s);++o)for(var h=a[o].metadata,c=0,u=h.length;u>c;++c){var p=h[c];r&&p.label===n&&(n=o,r=!1),s&&p.label===i&&(i=o,s=!1)}r||s||this._histogramFilter.setFilterBarRange({from:n,to:i})}else this._histogramFilter.setFilterPixelRange({from:0,to:this._histogram.totalWidth});this._histogram.deselect(),"slices"in e&&this._histogram.select(e.slices)}},i.prototype.deselect=function(){this._histogramFilter.setFilterPixelRange({from:0,to:this._histogram.totalWidth}),this._histogram.deselect()},i.prototype.processSpec=function(t){var e={};return e.histogram=this.processHistogram(t.histogram),e.leftRangeLabel=e.histogram.slices[0].label,e.rightRangeLabel=e.histogram.slices[e.histogram.slices.length-1].label,e},i.prototype.processHistogram=function(t){for(var e={slices:[]},n=t.slices,i=e.slices,r=0,s=0,a=0,o=n.length;o>a;++a,++s){for(var l=n[a];l.index>s;)i.push({label:"Unknown",count:0}),++s;i.push(l),r=Math.max(r,l.count)}return e.yMax=r,e},i.prototype.updateSpec=function(t){this._removeHandlers(),this._element.remove(),this._spec.histogram.push.apply(this._spec.histogram,t.histogram),this._spec=this.processSpec(this._spec),this._initializeLayout(o),this.select(t),this._addHandlers()},i.prototype.destroy=function(t){if(t){var e=function(){this.off("facet-histogram:animation:visible-off",e),this._destroy()}.bind(this);this.visible=!1}else this._destroy()},i.prototype._destroy=function(){this._removeHandlers(),this._element.off("transitionend"),this._element.remove(),r.prototype.destroy.call(this)},i.prototype._initializeLayout=function(t){this._element=$(t(this._spec)),this._container.append(this._element),this._svg=this._element.find("svg"),this._histogram=new s(this._svg,this._spec.histogram),this._histogramFilter=new a(this._element,this._histogram),this._histogramFilter.setFilterPixelRange({from:0,to:this._histogram.totalWidth}),this._rangeControls=this._element.find(".facet-range-controls");var e,n,i;for(e=0,n=this._element.length;n>e;++e)i=this._element[e].offsetHeight;var r=this._element.find("*");for(e=0,n=r.length;n>e;++e)i=r[e].offsetHeight},i.prototype._addHandlers=function(){if(this.visible){for(var t=this._histogram.bars,e=0,n=t.length;n>e;++e)t[e]._addHandlers(),t[e].onMouseEnter=this._onMouseEventBar.bind(this,"facet-histogram:mouseenter"),t[e].onMouseLeave=this._onMouseEventBar.bind(this,"facet-histogram:mouseleave"),t[e].onClick=this._onMouseEventBar.bind(this,"facet-histogram:click");this._histogramFilter.onFilterChanged=this._onFilterChanged.bind(this)}},i.prototype._removeHandlers=function(){for(var t=this._histogram.bars,e=0,n=t.length;n>e;++e)t[e]._removeHandlers(),t[e].onMouseEnter=null,t[e].onMouseLeave=null,t[e].onClick=null;this._histogramFilter.onFilterChanged=null},i.prototype._onMouseEventBar=function(t,e,n){this.emit(t,n,this._key,e.info)},i.prototype._onFilterChanged=function(t,e){var n="facet-histogram:rangechanged"+(e?"user":"");this.emit(n,null,this._key,this.filterRange)},i.prototype._handleTransitionEnd=function(t){var e=t.originalEvent.propertyName;t.target===this._element.get(0)&&"opacity"===e?this.visible?this.emit("facet-histogram:animation:visible-on",t,this._key):this.emit("facet-histogram:animation:visible-off",t,this._key):t.target===this._rangeControls.get(0)&&"opacity"===e&&(this.abbreviated?this.emit("facet-histogram:animation:abbreviated-on",t,this._key):this.emit("facet-histogram:animation:abbreviated-off",t,this._key))},e.exports=i},{"../../templates/facetHorizontal":45,"../../util/util":56,"./facet":35,"./facetHistogram":36,"./facetHistogramFilter":38}],40:[function(t,e,n){function i(t,e,n){s.call(this,t,e,n),this._value=n.value,this._key=n.key,this._count=n.count,this._type=this._spec.isQuery?"query":"facet",this._hasEmittedSelectedEvent=!1,this._spec.isQuery&&"*"!=this._key&&(this._spec.displayValue=this._key+":"+(this._spec.label?this._spec.label:this._spec.value)),c.registerPartial("facetVertical_icon",a),c.registerPartial("facetVertical_links",o),c.registerPartial("facetVertical_search",l),c.registerPartial("facetVertical_queryClose",h),this._initializeLayout(u),"selected"in this._spec&&(this.select(this._spec.selected),delete this._spec.selected),this._setupHandlers(),this._element.on("transitionend",this._handleTransitionEnd.bind(this))}var r=t("../../util/util"),s=t("./facet"),a=t("../../templates/facetVertical_icon"),o=t("../../templates/facetVertical_links"),l=t("../../templates/facetVertical_search"),h=t("../../templates/facetVertical_queryClose"),c=t("handlebars"),u=t("../../templates/facetVertical"),p="facet-icon-highlighted",f="facets-facet-vertical-abbreviated",d="facets-facet-vertical-hidden";i.prototype=Object.create(s.prototype),i.prototype.constructor=i,Object.defineProperty(i.prototype,"key",{get:function(){return this._key}}),Object.defineProperty(i.prototype,"value",{get:function(){return this._value}}),Object.defineProperty(i.prototype,"icon",{get:function(){return this._spec.icon}}),Object.defineProperty(i.prototype,"total",{get:function(){return this._spec.total},set:function(t){this._spec.total=t,this._update()}}),Object.defineProperty(i.prototype,"count",{get:function(){return this._spec.count}}),Object.defineProperty(i.prototype,"highlighted",{get:function(){return this._iconContainer.hasClass(p)},set:function(t){t?this._iconContainer.addClass(p):this._iconContainer.removeClass(p)}}),Object.defineProperty(i.prototype,"abbreviated",{get:function(){return this._element.hasClass(f)},set:function(t){t!==this.abbreviated&&(t?(this._element.addClass(f),this._removeHandlers()):(this._element.removeClass(f),this._addHandlers()))}}),Object.defineProperty(i.prototype,"visible",{get:function(){return!this._element.hasClass(d)},set:function(t){t!==this.visible&&(t?(this._element.removeClass(d),this._addHandlers()):(this._element.addClass(d),this._removeHandlers()))}}),i.prototype.select=function(t,e){var n=e||{};this._spec.selected=t,this._spec.selectionCountLabel=n.countLabel,this._update()},i.prototype.deselect=function(){delete this._spec.selected,delete this._spec.selectionCountLabel,this._update()},i.prototype.updateSpec=function(t){this._spec=r.extend(this._spec,t),"selected"in this._spec?(this.select(this._spec.selected),delete this._spec.selected):this._update()},i.prototype.updateCount=function(t){this._spec.count+=t,this._update()},i.prototype.rescale=function(t){this.total=t},i.prototype.destroy=function(t){if(t){var e=function(){this.off(this._type+":animation:visible-off",e),this._destroy()}.bind(this);this.visible=!1}else this._destroy();s.prototype.destroy.call(this)},i.prototype._destroy=function(){this._removeHandlers(),this._element.off("transitionend"),this._element.remove()},i.prototype._initializeLayout=function(t){this._element=$(t(this._spec)),this._container.append(this._element),this._barContainer=this._element.find(".facet-bar-container");var e=this._barContainer.children(".facet-bar-base");this._barBackground=$(e[0]),this._barForeground=$(e[1]),this._iconContainer=this._element.find(".facet-icon"),this._icon=this._iconContainer.children("i"),this._iconColor=this._spec.icon&&this._spec.icon.color?this._spec.icon.color:null,this._label=this._element.find(".facet-label"),this._labelCount=this._element.find(".facet-label-count"),this._linksContainer=this._element.find(".facet-links"),this._queryCloseContainer=this._element.find(".facet-query-close"),this._searchContainer=this._element.find(".facet-search-container"),this._searchContainer.children().length||this._searchContainer.empty();var n,i,r;for(n=0,i=this._element.length;i>n;++n)r=this._element[n].offsetHeight;var s=this._element.find("*");for(n=0,i=s.length;i>n;++n)r=s[n].offsetHeight},i.prototype._addHandlers=function(){this.visible&&(this._iconContainer.hover(this._onMouseEnter.bind(this),this._onMouseLeave.bind(this)),this._element.click(this._onClick.bind(this)),this._element.find(".facet-search-container").on("click.facetSearch",this._onSearch.bind(this)),this._element.find(".facet-query-close").on("click.queryClose",this._onClose.bind(this)))},i.prototype._removeHandlers=function(){this._iconContainer.off("hover"),this._element.off("click"),this._element.find(".facet-search-container").off("click.facetSearch")},i.prototype._update=function(){var t=this._spec;this._iconContainer.empty(),this._iconContainer.append($(a(this._spec))),this._icon=this._iconContainer.children("i"),this._iconColor=this._spec.icon&&this._spec.icon.color?this._spec.icon.color:null,this._barBackground.css("width",t.count/t.total*100+"%"),t.selected>=0?(this._barForeground.hasClass("facet-bar-selected")||(this._barForeground.removeAttr("style"),this._barForeground.addClass("facet-bar-selected")),this._barForeground.css("width",t.selected/t.total*100+"%")):(this._barForeground.hasClass("facet-bar-selected")&&(this._iconColor&&this._barForeground.css("background-color",this._iconColor),this._barForeground.removeClass("facet-bar-selected")),this._barForeground.css("width",t.count/t.total*100+"%")),t.displayValue?newLabelHTML=t.displayValue:t.label?newLabelHTML=t.label:newLabelHTML=t.value,newLabelHTML!==this._label.html()&&this._label.html(newLabelHTML);var e=t.selectionCountLabel||t.countLabel||t.count.toString();this._labelCount.text()!==e&&this._labelCount.text(e),this._linksContainer.empty(),this._linksContainer.append(o(this._spec)),this._searchContainer.empty(),this._searchContainer.append(l(this._spec)),this._searchContainer.children().length||this._searchContainer.empty()},i.prototype._onClick=function(t){this.emit(this._type+":click",t,this._key,this._value,this._count)},i.prototype._onSearch=function(t){t.stopPropagation(),this.emit(this._type+":search",t,this._key,this._value,this._count)},i.prototype._onClose=function(t){t.stopPropagation(),this.emit(this._type+":close",t,this._key,this._value,this._count)},i.prototype._onMouseEnter=function(t){this.emit(this._type+":mouseenter",t,this._key,this._value,this._count)},i.prototype._onMouseLeave=function(t){this.emit(this._type+":mouseleave",t,this._key,this._value,this._count)},i.prototype._handleTransitionEnd=function(t){var e=t.originalEvent.propertyName;t.target===this._element.get(0)&&"opacity"===e?this.visible?this.emit(this._type+":animation:visible-on",t,this._key,this._value,this._count):this.emit(this._type+":animation:visible-off",t,this._key,this._value,this._count):t.target===this._iconContainer.get(0)&&"opacity"===e?this.abbreviated?this.emit(this._type+":animation:abbreviated-on",t,this._key,this._value,this._count):this.emit(this._type+":animation:abbreviated-off",t,this._key,this._value,this._count):t.target===this._barBackground.get(0)&&"width"===e?this.emit(this._type+":animation:bar-width-change",t,this._key,this._value,this._count):t.target===this._barForeground.get(0)&&"width"===e&&(!this._hasEmittedSelectedEvent&&this._barForeground.hasClass("facet-bar-selected")?(this.emit(this._type+":animation:selected-on",t,this._key,this._value,this._count),this._hasEmittedSelectedEvent=!0):this._hasEmittedSelectedEvent&&!this._barForeground.hasClass("facet-bar-selected")&&(this.emit(this._type+":animation:selected-off",t,this._key,this._value,this._count),this._hasEmittedSelectedEvent=!1))},e.exports=i},{"../../templates/facetVertical":46,"../../templates/facetVertical_icon":47,"../../templates/facetVertical_links":48,"../../templates/facetVertical_queryClose":49,"../../templates/facetVertical_search":50,"../../util/util":56,"./facet":35,handlebars:22}],41:[function(t,e,n){function i(t,e,n,i,r){s.call(this),this._options=i,this._widget=t,this._key=n.key,this._container=e,this._ownsTotal=!1,this._total=0,this._canDrag=!1,this._dragging=!1,this._draggingX=0,this._draggingY=0,this._draggingYOffset=0,this._draggingGroupTop=0,this._scrollElement=null,this._trackingTouchID=null,this._touchStartTime=0,this._index=r||0,this._facets={vertical:[],horizontal:[],all:[]},this._initializeLayout(a,n.label,n.more||0),this._initializeFacets(n),n.collapsed&&(this.collapsed=!0),this._setupHandlers()}var r=t("../util/util"),s=t("../components/IBindable"),a=t("../templates/group"),o=t("../templates/group-more"),l=t("../components/facet/facetVertical"),h=t("../components/facet/facetHorizontal"),c="facets-group-collapsed",u="group-facet-ellipsis-visible",p="fa-check-square-o",f="fa-square-o";i.prototype=Object.create(s.prototype),i.prototype.constructor=i,Object.defineProperty(i.prototype,"key",{get:function(){return this._key}}),Object.defineProperty(i.prototype,"total",{get:function(){return this._total}}),Object.defineProperty(i.prototype,"facets",{get:function(){return this._facets.all}}),Object.defineProperty(i.prototype,"horizontalFacets",{get:function(){return this._facets.horizontal}}),Object.defineProperty(i.prototype,"verticalFacets",{get:function(){return this._facets.vertical}}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._element.is(":visible")},set:function(t){t?this._element.show():this._element.hide()}}),Object.defineProperty(i.prototype,"index",{get:function(){return this._index},set:function(t){t!==this._index&&(this._index=t,this.emit("facet-group:reordered",null,this._key,this._index))}}),Object.defineProperty(i.prototype,"collapsed",{get:function(){return this._element.hasClass(c)},set:function(t){t!==this.collapsed&&(this._setCollapsedClasses(t,this.facets.length>=3),this._setAbbreviateAndHideFacets(t,3))}}),i.prototype.initializeSelection=function(){this.verticalFacets.forEach(function(t){t.select(0)})},i.prototype.clearSelection=function(){this.facets.forEach(function(t){t.deselect()})},i.prototype.highlight=function(t){var e=this._getFacet(t);e&&(e.highlighted=!0)},i.prototype.unhighlight=function(t){if(t){var e=this._getFacet(t);e&&(e.highlighted=!1)}else this.verticalFacets.forEach(function(t){t.highlighted=!1})},i.prototype.isHighlighted=function(t){var e=!1,n=this._getFacet(t);return n&&(e=n.highlighted),e},i.prototype.getFilterRange=function(t){var e=this._getFacet(t);return e&&"filterRange"in e?e.filterRange:null},i.prototype.append=function(t){var e;this._removeHandlers(),t.more=t.more||0,this._updateMore(t.more),this.collapsed=!1,t.total&&(this._ownsTotal=!0,this._total=t.total),t.facets.forEach(function(n){if(this._ownsTotal||"histogram"in n||(this._total+=n.count),e=this._getFacet(n.value))n.count+=e.count,e.updateSpec(n);else{var i=this._createNewFacet(n,t.key,!0);i instanceof h?this.horizontalFacets.push(i):this.verticalFacets.push(i),this.facets.push(i),i.visible=!0,this.forward(i)}},this),this.facets.forEach(function(t){t.total=this._total},this),t.collapsed&&(this.collapsed=!0),this._addHandlers()},i.prototype.replace=function(t){this.collapsed=!1,this._removeHandlers(),this._destroyFacets(),this._initializeFacets(t),t.more=t.more||0,this._updateMore(t.more),t.collapsed&&(this.collapsed=!0),this._addHandlers()},i.prototype.removeFacet=function(t){var e=this._getFacet(t),n=this.facets.indexOf(e);if(n>=0){this.facets.splice(n,1);var i=null;i=e instanceof h?this.horizontalFacets:this.verticalFacets,n=i.indexOf(e),n>=0&&i.splice(n,1),this._ownsTotal||(this._total+=e._spec.count,this.facets.forEach(function(t){t.total=this._total},this)),e.destroy(!0)}},i.prototype.destroy=function(){this._removeHandlers(),this._destroyFacets(),this._element.remove(),s.prototype.destroy.call(this)},i.prototype._destroyFacets=function(){this.facets.forEach(function(t){t.destroy()}),this._facets={horizontal:[],vertical:[],all:[]}},i.prototype._initializeLayout=function(t,e,n){this._element=$(t({label:e,more:n})),this._container.append(this._element),this._facetContainer=this._element.find(".group-facet-container"),this._groupContent=this._element.find(".facets-group"),this._updateMore(n)},i.prototype._initializeFacets=function(t){t.total?(this._ownsTotal=!0,this._total=t.total):(this._ownsTotal=!1,t.facets.forEach(function(t){"histogram"in t||(this._total+=t.count)},this));for(var e=t.facets,n=0,i=e.length;i>n;++n){var r=e[n],s=this._createNewFacet(r,t.key);s instanceof h?this.horizontalFacets.push(s):this.verticalFacets.push(s),this.facets.push(s),this.forward(s)}},i.prototype._setupHandlers=function(){this._removeHandlers(),this._addHandlers()},i.prototype._addHandlers=function(){this._element.find(".group-expander").on("click.facetsCollapseExpand",this._toggleCollapseExpand.bind(this)),this._element.find(".group-more-target").on("click.facetsGroupMore",this._onMore.bind(this)),this._element.find(".group-other-target").on("click.facetsGroupOther",this._onOther.bind(this)),this._element.find(".group-header").on("mousedown",this._handleHeaderMouseDown.bind(this)),$(document).on("mouseup.group."+this._key,this._handleHeaderMouseUp.bind(this)),$(document).on("mousemove.group."+this._key,this._handleHeaderMouseMove.bind(this)),this._element.find(".group-header").on("touchstart",this._handleHeaderTouchStart.bind(this)),$(document).on("touchmove.group."+this._key,this._handleHeaderTouchMove.bind(this)),$(document).on("touchend.group."+this._key,this._handleHeaderTouchEnd.bind(this)),$(document).on("touchcancel.group."+this._key,this._handleHeaderTouchEnd.bind(this)),this._element.on("transitionend",this._handleTransitionEnd.bind(this)),setTimeout(this._addScrollHandler.bind(this))},i.prototype._removeHandlers=function(){this._element.find(".group-expander").off("click.facetsCollapseExpand"),this._element.find(".group-more-target").off("click.facetsGroupMore"),this._element.find(".group-other-target").off("click.facetsGroupOther"),this._element.find(".group-header").off("mousedown"),$(document).off("mouseup.group."+this._key),$(document).off("mousemove.group."+this._key),$(document).off("touchmove.group."+this._key),$(document).off("touchend.group."+this._key),$(document).off("touchcancel.group."+this._key),this._element.off("transitionend"),this._removeScrollHandler()},i.prototype._addScrollHandler=function(){this._removeScrollHandler();for(var t=this._element;;){if(!t.length)break;var e=t.get(0);if(e.scrollHeight>e.clientHeight){this._scrollElement=t;break}t=t.parent()}this._scrollElement&&this._scrollElement.on("scroll.group."+this._key,this._handleHeaderMouseMove.bind(this))},i.prototype._removeScrollHandler=function(){this._scrollElement&&(this._scrollElement.off("scroll.group."+this._key),
this._scrollElement=null)},i.prototype._getFacet=function(t){var e=this.facets.filter(function(e){return e.value===t});return e&&e.length>0?e[0]:null},i.prototype._updateMore=function(t){this._moreElement=$(o({more:t})),this._moreContainer=this._element.find(".group-more-container"),this._moreContainer.replaceWith(this._moreElement),this._moreElement.css("height")},i.prototype._createNewFacet=function(t,e,n){return"histogram"in t?new h(this._facetContainer,this,r.extend(t,{key:e,hidden:n})):new l(this._facetContainer,this,r.extend(t,{key:e,total:this._total,search:this._options.search,hidden:n}))},i.prototype._toggleCollapseExpand=function(t){return t&&(t.preventDefault(),t.stopPropagation()),this.collapsed=!this.collapsed,this.collapsed?this.emit("facet-group:collapse",t,this._key):this.emit("facet-group:expand",t,this._key),!1},i.prototype._setCollapsedClasses=function(t,e){var n=this._element.find(".toggle"),i=this._element.find(".group-facet-ellipsis");t?(this._element.addClass(c),n.removeClass(p),n.addClass(f),e&&i.addClass(u)):(this._element.removeClass(c),n.removeClass(f),n.addClass(p),i.removeClass(u))},i.prototype._setAbbreviateAndHideFacets=function(t,e){this.facets.forEach(function(n,i){e>i?n.abbreviated=t:n.visible=!t})},i.prototype._onMore=function(t){t.preventDefault(),t.stopPropagation();var e=t.currentTarget.getAttribute("index");e=null!==e?parseInt(e):null,this.emit("facet-group:more",t,this._key,e)},i.prototype._onOther=function(t){t.preventDefault(),t.stopPropagation(),this.emit("facet-group:other",t,this._key)},i.prototype._handleHeaderMouseDown=function(t){return 0===t.button?(t.preventDefault(),this._canDrag=!0,this._dragging=!1,this._draggingX=t.clientX,this._draggingY=t.clientY,this._draggingYOffset=0,this._draggingGroupTop=this._element.offset().top,!1):!0},i.prototype._handleHeaderMouseUp=function(t){return this._canDrag=!1,this._dragging?(t.preventDefault(),this._dragging=!1,this._groupContent.removeAttr("style"),this.emit("facet-group:dragging:end",t,this._key),!1):!0},i.prototype._handleHeaderMouseMove=function(t){return this._canDrag?(t.preventDefault(),this._dragging||this._startDragging(t),this._performDragging(t),!1):!0},i.prototype._handleHeaderTouchStart=function(t){var e=t.originalEvent;if(e.touches.length<2&&null===this._trackingTouchID){var n=t.originalEvent.changedTouches[0];this._canDrag=!0,this._trackingTouchID=n.identifier,this._touchStartTime=t.timeStamp,this._draggingX=n.clientX,this._draggingY=n.clientY}else this._canDrag=!1,this._trackingTouchID=null,this._touchStartTime=0;this._dragging=!1},i.prototype._handleHeaderTouchMove=function(t){if(this._canDrag&&null!==this._trackingTouchID)for(var e=t.originalEvent.changedTouches,n=0,i=e.length;i>n;++n){var r=e[n];if(r.identifier===this._trackingTouchID){if(!this._dragging){var s=t.timeStamp-this._touchStartTime,a=Math.sqrt(Math.pow(r.clientX-this._draggingX,2)+Math.pow(r.clientY-this._draggingY,2));s>200?(t.preventDefault(),this._draggingYOffset=0,this._draggingGroupTop=this._element.offset().top,this._startDragging(t),this._performDragging(r)):a>7&&(this._canDrag=!1,this._trackingTouchID=null,this._touchStartTime=0);break}t.preventDefault(),this._performDragging(r);break}}},i.prototype._handleHeaderTouchEnd=function(t){this._canDrag=!1,this._trackingTouchID=null,this._touchStartTime=0,this._dragging&&(t.preventDefault(),this._dragging=!1,this._groupContent.removeAttr("style"),this.emit("facet-group:dragging:end",t,this._key))},i.prototype._handleTransitionEnd=function(t){var e=t.originalEvent.propertyName;t.target===this._moreElement.get(0)&&"opacity"===e&&(this.collapsed?this.emit("facet-group:animation:collapse-on",t,this._key):this.emit("facet-group:animation:collapse-off",t,this._key))},i.prototype._startDragging=function(t){this._dragging||(this._dragging=!0,this._groupContent.css({position:"relative",top:0,left:0,"z-index":999}),this.emit("facet-group:dragging:start",t,this._key))},i.prototype._performDragging=function(t){var e,n,i=this._element.offset(),r=i.top,s=this._element.height();if("scroll"===t.type){var a=this._groupContent.offset();e=a.top-r-this._draggingYOffset,n=a.left-i.left}else e=t.clientY-this._draggingY,n=t.clientX-this._draggingX;this._draggingYOffset+=this._draggingGroupTop-r,this._draggingGroupTop=r,e+=this._draggingYOffset;for(var o=r+e,l=o+.5*s,h=this._widget._groups,c=0,u=h.length;u>c;++c){var p=h[c],f=p._element.height(),d=p._element.offset().top,g=d+f,m=.5*Math.min(f,s);if(r>d&&l>=d-m&&d+m>=l||d>r&&l>=g-m&&g+m>=l){if(p!==this){var _=0;r>d?(p._element.before(this._element),_=d-r,this._draggingY+=_,e-=_):(p._element.after(this._element),_=d-r-(s-f),this._draggingY+=_,e-=_),this._draggingGroupTop=this._element.offset().top,this._widget.updateGroupIndices()}break}}this._groupContent.css({top:e,left:n}),this.emit("facet-group:dragging:move",t,this._key)},e.exports=i},{"../components/IBindable":34,"../components/facet/facetHorizontal":39,"../components/facet/facetVertical":40,"../templates/group":52,"../templates/group-more":51,"../util/util":56}],42:[function(t,e,n){function i(t,e){r.call(this),this._element=$(s()),t.append(this._element),this._facetContainer=this._element.find(".group-facet-container"),this._facets=[],this._queries=[],this._total=0,e&&e.length>0&&e.forEach(function(t){this.addQuery(t)},this),this._updateFacetTotals(),0===this._queries.length&&(this.visible=!1)}var r=(t("../util/util"),t("./IBindable")),s=t("../templates/querygroup"),a=t("../components/facet/facetVertical"),o=t("../components/facet/facetHorizontal"),l=t("./group"),h=t("../util/color"),c="#8AAD20",u=.2;i.prototype=Object.create(l.prototype),i.prototype.constructor=i,Object.defineProperty(i.prototype,"key",{get:function(){return"queries"}}),i.prototype.initializeSelection=function(){this._facets.forEach(function(t){"*"!==t.key&&t.select(0)})},i.prototype.clearSelection=function(){this._facets.forEach(function(t){t.deselect()})},i.prototype.unhighlightAll=function(){this._facets.forEach(function(t){t.highlighted=!1},this)},i.prototype.addQuery=function(t,e){this._queries.push(t),this._total+=t.count,t.icon||(t.icon=this._generateIcon()),t.icon.color||(t.icon.color=this._generateColor()),t.hidden=!0,t.isQuery=!0;var n="histogram"in t?o:a,i=new n(this._facetContainer,this,t);this._facets.push(i),i.visible=!0,this.forward(i),e&&this._updateFacetTotals()},i.prototype.removeQuery=function(t,e,n){var i=this._getQuery(t,e);if(i){var r=i._spec,s=this._queries.indexOf(r),a=this._facets(i);s>=0&&a>=0&&(this._queries.splice(s,1),this._facets.splice(a,1),i.destroy(!0),this._total-=r.count,n&&this._updateFacetTotals())}},i.prototype.destroy=function(){this._facets.forEach(function(t){t.destroy()}),this._facets=[],this._queries=[],this._element.remove(),r.prototype.destroy.call(this)},i.prototype._updateFacetTotals=function(){this._facets.forEach(function(t){t.total=this._total},this)},i.prototype._getQuery=function(t,e){var n=this._facets.filter(function(n){return n.key===t&&n.value===e});return n&&n.length>0?n[0]:null},i.prototype._generateIcon=function(){return{"class":"fa fa-search",color:this._generateColor()}},i.prototype._generateColor=function(){var t=this._facets.length>0?(new h).hex(this._facets[0].icon.color):(new h).hex(c),e=this._facets.length,n=t.shade(e*u);return n.hex()},e.exports=i},{"../components/facet/facetHorizontal":39,"../components/facet/facetVertical":40,"../templates/querygroup":54,"../util/color":55,"../util/util":56,"./IBindable":34,"./group":41}],43:[function(t,e,n){var i=t("handlebars");i.registerHelper("ifCond",function(t,e,n,i){switch(e){case"==":return t==n?i.fn(this):i.inverse(this);case"===":return t===n?i.fn(this):i.inverse(this);case"<":return n>t?i.fn(this):i.inverse(this);case"<=":return n>=t?i.fn(this):i.inverse(this);case">":return t>n?i.fn(this):i.inverse(this);case">=":return t>=n?i.fn(this):i.inverse(this);case"&&":return t&&n?i.fn(this):i.inverse(this);case"||":return t||n?i.fn(this):i.inverse(this);case"instanceof":if("string"==typeof n){if(typeof t===n||window[n]&&t instanceof window[n])return i.fn(this)}else if(n===Object(n)&&t instanceof n)return i.fn(this);return i.inverse(this);default:return i.inverse(this)}}),i.registerHelper("math",function(t,e,n){if(null===t||void 0===t||null===n||void 0===n)return 0;switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return 0===n?0:t/n}}),i.registerHelper("percentage",function(t,e){return null===t||void 0===t||null===e||void 0===e||0===e?0:t/e*100}),$.fn.enterKey=function(t,e){return this.each(function(){$(this).keyup(function(n){var i=n.keyCode?n.keyCode:n.which;"13"!=i&&"10"!=i||e&&!n[e+"Key"]||t.call(this,n)})})}},{handlebars:22}],44:[function(t,e,n){function i(t,e,n,i){r.call(this),this._options=i||{},this._container=$(o()),this._container.appendTo(t),this._init(e,n)}t("./helpers");var r=(t("./util/util"),t("./components/IBindable")),s=t("./components/group"),a=t("./components/querygroup"),o=t("./templates/main");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.select=function(t,e){var n=!1,i=!1;t.forEach(function(t){var r=this._getGroup(t.key);!e&&r?(n||(this._groups.forEach(function(t){t.initializeSelection()}),n=!0),t.facets.forEach(function(t){var e=r._getFacet(t.value);e&&e.select(t.selected||t,{countLabel:t.countLabel})}.bind(this))):t.facets.forEach(function(e){var n=this._getQuery(t.key,e.value);n&&(i||(this._queryGroup.initializeSelection(),i=!0),n.select(e.selected,{countLabel:e.countLabel}))}.bind(this))}.bind(this))},i.prototype.deselect=function(t){t?t.forEach(function(t){var e=this._getGroup(t.key);if(e)if("value"in t){var n=e._getFacet(t.value);n&&n.deselect()}else e.clearSelection()}.bind(this)):this._groups.forEach(function(t){t.clearSelection()}),this._queryGroup.clearSelection()},i.prototype.replace=function(t,e){this._destroyContents(),this._init(t,e)},i.prototype.replaceGroup=function(t){var e=this._getGroup(t.key);e&&(e.replace(t),this._bindClientEvents())},i.prototype.highlight=function(t,e){t.forEach(function(t){var n=this._getGroup(t.key);if(!e&&n)n.highlight(t.value);else{var i=this._getQuery(t.key,t.value);i&&(i.highlighted=!0)}},this)},i.prototype.unhighlight=function(t,e){arguments.length>0?t.forEach(function(t){var n=this._getGroup(t.key);if(!e&&n)n.unhighlight(t.value);else{var i=this._getQuery(t.key,t.value);i&&(i.highlighted=!1)}},this):this._unhighlightAll()},i.prototype.isHighlighted=function(t,e){var n=this._getGroup(t.key);if(!e&&n)return n.isHighlighted(t.value);var i=this._getQuery(t.key,t.value);return i?i.highlighted:!1},i.prototype.isCollapsed=function(t){var e=this._getGroup(t);return e?e.collapsed:!1},i.prototype.getFilterRange=function(t,e){var n=this._getGroup(t);return n?n.getFilterRange(e):null},i.prototype.append=function(t,e){var n;t&&t.forEach(function(t){if(n=this._getGroup(t.key))n.append(t);else{var e=new s(this,this._container,t,this._options,this._groups.length);this._groups.push(e)}},this),e&&e.forEach(function(t){this.addQuery(t)},this),this._bindClientEvents()},i.prototype.removeFacet=function(t,e){var n=this._getGroup(t);n&&n.removeFacet(e)},i.prototype.addQuery=function(t){this._queryGroup.addQuery(t,!0),this._bindClientEvents()},i.prototype.removeQuery=function(t,e){this._queryGroup.removeQuery(t,e,!0)},i.prototype.updateGroupIndices=function(){this._groups.sort(function(t,e){return t._element.offset().top-e._element.offset().top}),this._groups.forEach(function(t,e){t.index=e})},i.prototype.getGroupIndices=function(){return this._groups.map(function(t){return t.key})},i.prototype.destroy=function(){this._destroyContents(),this._container.remove(),r.prototype.destroy.call(this)},i.prototype._init=function(t,e){this._queryGroup=new a(this._container,e||[]),this._groups=t.map(function(t,e){return new s(this,this._container,t,this._options,e)}.bind(this)),this._bindClientEvents()},i.prototype._unhighlightAll=function(){this._groups.forEach(function(t){t.unhighlight()}),this._queryGroup.unhighlightAll()},i.prototype._getQuery=function(t,e){return this._queryGroup._getQuery(t,e)},i.prototype._getGroup=function(t){var e=this._groups.filter(function(e){return e.key===t});return e&&e.length>0?e[0]:null},i.prototype._destroyContents=function(){this._bindClientEvents(!0),this._queryGroup.destroy(),this._groups&&this._groups.forEach(function(t){t.destroy()})},i.prototype._bindClientEvents=function(t){t?(this.unforward(this._queryGroup),this._groups.forEach(function(t){this.unforward(t)}.bind(this))):(this.forward(this._queryGroup),this._groups.forEach(function(t){this.forward(t)}.bind(this)))},e.exports=i},{"./components/IBindable":34,"./components/group":41,"./components/querygroup":42,"./helpers":43,"./templates/main":53,"./util/util":56}],45:[function(t,e,n){var i=t("handlebars");e.exports=i.template({1:function(t,e,n,i){return"	facets-facet-horizontal-hidden\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var r,s,a=e.helperMissing,o="function",l=this.escapeExpression;return'<div id="'+l((s=null!=(s=e.id||(null!=t?t.id:t))?s:a,typeof s===o?s.call(t,{name:"id",hash:{},data:i}):s))+'" class="facets-facet-base facets-facet-horizontal\n'+(null!=(r=e["if"].call(t,null!=t?t.hidden:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?r:"")+'">\n	<div class="facet-range">\n        <svg class="facet-histogram"></svg>\n        <div class="facet-range-filter facet-range-filter-init">\n            <div class="facet-range-filter-slider facet-range-filter-left">\n            </div>\n            <div class="facet-range-filter-slider facet-range-filter-right">\n            </div>\n        </div>\n	</div>\n    <div class="facet-range-labels">\n        <div class="facet-range-label">'+l((s=null!=(s=e.leftRangeLabel||(null!=t?t.leftRangeLabel:t))?s:a,typeof s===o?s.call(t,{name:"leftRangeLabel",hash:{},data:i}):s))+'</div>\n        <div class="facet-range-label">'+l((s=null!=(s=e.rightRangeLabel||(null!=t?t.rightRangeLabel:t))?s:a,typeof s===o?s.call(t,{name:"rightRangeLabel",hash:{},data:i}):s))+'</div>\n    </div>\n    <div class="facet-range-controls">\n        <div class="facet-page-left facet-page-ctrl">\n            <i class="fa fa-chevron-left"></i>\n        </div>\n        <div class="facet-range-current">\n			'+l((s=null!=(s=e.leftRangeLabel||(null!=t?t.leftRangeLabel:t))?s:a,typeof s===o?s.call(t,{name:"leftRangeLabel",hash:{},data:i}):s))+" - "+l((s=null!=(s=e.rightRangeLabel||(null!=t?t.rightRangeLabel:t))?s:a,typeof s===o?s.call(t,{name:"rightRangeLabel",hash:{},data:i}):s))+'\n        </div>\n        <div class="facet-page-right facet-page-ctrl">\n            <i class="fa fa-chevron-right"></i>\n        </div>\n    </div>\n</div>\n'},useData:!0})},{handlebars:22}],46:[function(t,e,n){var i=t("handlebars");e.exports=i.template({1:function(t,e,n,i){return"	facets-facet-vertical-hidden\n"},3:function(t,e,n,i){return'                <div class="facet-bar-base facet-bar-selected" style="width:'+this.escapeExpression((e.percentage||t&&t.percentage||e.helperMissing).call(t,null!=t?t.selected:t,null!=t?t.total:t,{name:"percentage",hash:{},data:i}))+'%;"></div>\n'},5:function(t,e,n,i){var r;return(null!=(r=e["if"].call(t,null!=(r=null!=t?t.icon:t)?r.color:r,{name:"if",hash:{},fn:this.program(6,i,0),inverse:this.program(8,i,0),data:i}))?r:"")+"\n"},6:function(t,e,n,i){var r,s=this.escapeExpression;return'                    <div class="facet-bar-base" style="width:'+s((e.percentage||t&&t.percentage||e.helperMissing).call(t,null!=t?t.count:t,null!=t?t.total:t,{name:"percentage",hash:{},data:i}))+"%; background-color:"+s(this.lambda(null!=(r=null!=t?t.icon:t)?r.color:r,t))+'"></div>\n'},8:function(t,e,n,i){return'                    <div class="facet-bar-base facet-bar-default" style="width:'+this.escapeExpression((e.percentage||t&&t.percentage||e.helperMissing).call(t,null!=t?t.count:t,null!=t?t.total:t,{name:"percentage",hash:{},data:i}))+'%;"></div>\n'},10:function(t,e,n,i){var r,s;return"                    "+(null!=(s=null!=(s=e.countLabel||(null!=t?t.countLabel:t))?s:e.helperMissing,r="function"==typeof s?s.call(t,{name:"countLabel",hash:{},data:i}):s)?r:"")+"\n"},12:function(t,e,n,i){var r;return"					"+this.escapeExpression((r=null!=(r=e.count||(null!=t?t.count:t))?r:e.helperMissing,"function"==typeof r?r.call(t,{name:"count",hash:{},data:i}):r))+"\n"},14:function(t,e,n,i){var r,s;return"					"+(null!=(s=null!=(s=e.displayValue||(null!=t?t.displayValue:t))?s:e.helperMissing,r="function"==typeof s?s.call(t,{name:"displayValue",hash:{},data:i}):s)?r:"")+"\n"},16:function(t,e,n,i){var r;return null!=(r=e["if"].call(t,null!=t?t.label:t,{name:"if",hash:{},fn:this.program(17,i,0),inverse:this.program(19,i,0),data:i}))?r:""},17:function(t,e,n,i){var r,s;return"					"+(null!=(s=null!=(s=e.label||(null!=t?t.label:t))?s:e.helperMissing,r="function"==typeof s?s.call(t,{name:"label",hash:{},data:i}):s)?r:"")+"\n"},19:function(t,e,n,i){var r,s;return"					"+(null!=(s=null!=(s=e.value||(null!=t?t.value:t))?s:e.helperMissing,r="function"==typeof s?s.call(t,{name:"value",hash:{},data:i}):s)?r:"")+"\n				"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var r,s,a=e.helperMissing,o=this.escapeExpression;return'<div id="'+o((s=null!=(s=e.id||(null!=t?t.id:t))?s:a,"function"==typeof s?s.call(t,{name:"id",hash:{},data:i}):s))+'" class="facets-facet-base facets-facet-vertical\n'+(null!=(r=e["if"].call(t,null!=t?t.hidden:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?r:"")+'">\n    <div class="facet-icon">\n'+(null!=(r=this.invokePartial(n.facetVertical_icon,t,{name:"facetVertical_icon",data:i,indent:"		",helpers:e,partials:n}))?r:"")+'    </div>\n    <div class="facet-block">\n        <div class="facet-bar-container">\n            <div class="facet-bar-base facet-bar-background" style="width:'+o((e.percentage||t&&t.percentage||a).call(t,null!=t?t.count:t,null!=t?t.total:t,{name:"percentage",hash:{},data:i}))+'%;"></div>\n'+(null!=(r=(e.ifCond||t&&t.ifCond||a).call(t,null!=t?t.selected:t,">=",0,{name:"ifCond",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?r:"")+"\n"+(null!=(r=(e.ifCond||t&&t.ifCond||a).call(t,null!=t?t.selected:t,"===",void 0,{name:"ifCond",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?r:"")+'        </div>\n        <div class="facet-label-container">\n            <span class="facet-label-count">\n'+(null!=(r=e["if"].call(t,null!=t?t.countLabel:t,{name:"if",hash:{},fn:this.program(10,i,0),inverse:this.program(12,i,0),data:i}))?r:"")+'			</span>\n			<span class="facet-label">\n'+(null!=(r=e["if"].call(t,null!=t?t.displayValue:t,{name:"if",hash:{},fn:this.program(14,i,0),inverse:this.program(16,i,0),data:i}))?r:"")+'			</span>\n        </div>\n    </div>\n	<div class="facet-links">\n'+(null!=(r=this.invokePartial(n.facetVertical_links,t,{name:"facetVertical_links",data:i,indent:"		",helpers:e,partials:n}))?r:"")+'    </div>\n    <div class="facet-query-close">\n'+(null!=(r=this.invokePartial(n.facetVertical_queryClose,t,{name:"facetVertical_queryClose",data:i,indent:"        ",helpers:e,partials:n}))?r:"")+'    </div>\n	<div class="facet-search-container">\n'+(null!=(r=this.invokePartial(n.facetVertical_search,t,{name:"facetVertical_search",data:i,indent:"		",helpers:e,partials:n}))?r:"")+"	</div>\n</div>\n"},usePartial:!0,useData:!0})},{handlebars:22}],47:[function(t,e,n){var i=t("handlebars");e.exports=i.template({1:function(t,e,n,i){var r;return'    <i class="'+this.escapeExpression(this.lambda(null!=(r=null!=t?t.icon:t)?r["class"]:r,t))+'" '+(null!=(r=e["if"].call(t,null!=(r=null!=t?t.icon:t)?r.color:r,{name:"if",hash:{},fn:this.program(2,i,0),inverse:this.noop,data:i}))?r:"")+"    ></i>\n"},2:function(t,e,n,i){var r;return'\n       style="color:'+this.escapeExpression(this.lambda(null!=(r=null!=t?t.icon:t)?r.color:r,t))+'"\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var r;return(null!=(r=e["if"].call(t,null!=t?t.icon:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?r:"")+'<div class="facet-icon-marker">\n    <i class="fa fa-check"></i>\n</div>\n'},useData:!0})},{handlebars:22}],48:[function(t,e,n){var i=t("handlebars");e.exports=i.template({1:function(t,e,n,i){var r;return'    <i class="fa fa-link"></i>'+this.escapeExpression((r=null!=(r=e.links||(null!=t?t.links:t))?r:e.helperMissing,"function"==typeof r?r.call(t,{name:"links",hash:{},data:i}):r))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var r;return null!=(r=e["if"].call(t,null!=t?t.links:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?r:""},useData:!0})},{handlebars:22}],49:[function(t,e,n){var i=t("handlebars");e.exports=i.template({1:function(t,e,n,i){return'    <div class="query-close"><i class="fa fa-close"></i></div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var r;return null!=(r=e["if"].call(t,null!=t?t.isQuery:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?r:""},useData:!0})},{handlebars:22}],50:[function(t,e,n){var i=t("handlebars");e.exports=i.template({1:function(t,e,n,i){return'    <div class="facet-search"><i class="fa fa-search"></i></div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var r;return null!=(r=e["if"].call(t,null!=t?t.search:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?r:""},useData:!0})},{handlebars:22}],51:[function(t,e,n){var i=t("handlebars");e.exports=i.template({1:function(t,e,n,i){return' group-other-target" style="cursor: pointer;'},3:function(t,e,n,i){var r;return null!=(r=(e.ifCond||t&&t.ifCond||e.helperMissing).call(t,null!=t?t.more:t,"instanceof","number",{name:"ifCond",hash:{},fn:this.program(4,i,0),inverse:this.program(7,i,0),data:i}))?r:""},4:function(t,e,n,i){var r;return null!=(r=(e.ifCond||t&&t.ifCond||e.helperMissing).call(t,null!=t?t.more:t,">",0,{name:"ifCond",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?r:""},5:function(t,e,n,i){var r;return'                <div class="group-more-marker">\n                    <i>●</i>\n                </div>\n                <div class="group-other-block">\n                    <div class="group-other-bar"></div>\n                    <div class="group-other-label-container">\n                        <span class="group-other-label-count">'+this.escapeExpression((r=null!=(r=e.more||(null!=t?t.more:t))?r:e.helperMissing,"function"==typeof r?r.call(t,{name:"more",hash:{},data:i}):r))+'+</span>\n                        <span class="group-other-label-other">other</span>\n                        <span class="group-other-label-show-more group-more-target">show more</span>\n                    </div>\n                </div>\n'},7:function(t,e,n,i){var r;return'            <div class="group-other-block">\n				<div class="group-other-label-container">\n'+(null!=(r=(e.ifCond||t&&t.ifCond||e.helperMissing).call(t,null!=t?t.more:t,"instanceof","Array",{name:"ifCond",hash:{},fn:this.program(8,i,0),inverse:this.program(17,i,0),data:i}))?r:"")+"				</div>\n			</div>\n"},8:function(t,e,n,i){var r;return'						<span class="group-other-label-show-more group-more-not-target">\n'+(null!=(r=e.each.call(t,null!=t?t.more:t,{name:"each",hash:{},fn:this.program(9,i,0),inverse:this.noop,data:i}))?r:"")+"						</span>\n"},9:function(t,e,n,i){var r;return null!=(r=(e.ifCond||t&&t.ifCond||e.helperMissing).call(t,t,"instanceof","object",{name:"ifCond",hash:{},fn:this.program(10,i,0),inverse:this.program(15,i,0),data:i}))?r:""},10:function(t,e,n,i){var r,s,a=e.helperMissing,o="function",l=this.escapeExpression;return'								<span class="'+(null!=(r=(e.ifCond||t&&t.ifCond||a).call(t,null!=t?t.clickable:t,"===",!0,{name:"ifCond",hash:{},fn:this.program(11,i,0),inverse:this.noop,data:i}))?r:"")+(null!=(r=e["if"].call(t,null!=t?t["class"]:t,{name:"if",hash:{},fn:this.program(13,i,0),inverse:this.noop,data:i}))?r:"")+'" index='+l((s=null!=(s=e.index||i&&i.index)?s:a,typeof s===o?s.call(t,{name:"index",hash:{},data:i}):s))+">"+l((s=null!=(s=e.label||(null!=t?t.label:t))?s:a,typeof s===o?s.call(t,{name:"label",hash:{},data:i}):s))+"</span>\n"},11:function(t,e,n,i){return"group-more-target "},13:function(t,e,n,i){var r;return this.escapeExpression((r=null!=(r=e["class"]||(null!=t?t["class"]:t))?r:e.helperMissing,"function"==typeof r?r.call(t,{name:"class",hash:{},data:i}):r))},15:function(t,e,n,i){return"                                <span>"+this.escapeExpression(this.lambda(t,t))+"</span>\n"},17:function(t,e,n,i){var r;return null!=(r=(e.ifCond||t&&t.ifCond||e.helperMissing).call(t,null!=t?t.more:t,"===",!0,{name:"ifCond",hash:{},fn:this.program(18,i,0),inverse:this.noop,data:i}))?r:""},18:function(t,e,n,i){return'						<span class="group-other-label-show-more group-more-target">show more</span>\n					'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var r;return'<div class="group-more-container'+(null!=(r=(e.ifCond||t&&t.ifCond||e.helperMissing).call(t,null!=t?t.more:t,"instanceof","number",{name:"ifCond",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?r:"")+'">\n'+(null!=(r=e["if"].call(t,null!=t?t.more:t,{name:"if",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?r:"")+"</div>\n"},useData:!0})},{handlebars:22}],52:[function(t,e,n){var i=t("handlebars");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var r;return'<div class="facets-group-container">\n	<div class="facets-group">\n		<div class="group-header">\n			<div class="group-expander">\n				<i class="fa fa-check-square-o toggle"></i>\n			</div>\n			'+this.escapeExpression((r=null!=(r=e.label||(null!=t?t.label:t))?r:e.helperMissing,"function"==typeof r?r.call(t,{name:"label",hash:{},data:i}):r))+'\n		</div>\n		<div class="group-facet-container-outer">\n			<div class="group-facet-container"></div>\n			<div class="group-more-container"></div>\n		</div>\n		<div class="group-facet-ellipsis">...</div>\n	</div>\n</div>\n'},useData:!0})},{handlebars:22}],53:[function(t,e,n){var i=t("handlebars");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return'<div class="facets-root-container">\n\n</div>'},useData:!0})},{handlebars:22}],54:[function(t,e,n){var i=t("handlebars");e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return'<div class="facets-group">\n    <div class="group-header">Queries</div>\n	<div class="group-facet-container"></div>\n</div>\n'},useData:!0})},{handlebars:22}],55:[function(t,e,n){var i=t("./util"),r=function(t,e,n){this.r=t||0,this.g=e||0,this.b=n||0};r.prototype=i.extend(r.prototype,{hex:function(t){if(0===arguments.length)return"#"+((1<<24)+(this.r<<16)+(this.g<<8)+this.b).toString(16).slice(1);try{var e=s.exec(t);return this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16),this}catch(n){throw"Could not parse color "+t}},shade:function(t){var e=0>t?0:255,n=0>t?-1*t:t,i=Math.round((e-this.r)*n)+this.r,s=Math.round((e-this.g)*n)+this.g,a=Math.round((e-this.b)*n)+this.b;return new r(i,s,a)}});var s=new RegExp(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);e.exports=r},{"./util":56}],56:[function(t,e,n){var i=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},r={extend:function(t,e){var n,i,r;for(i=1;i<arguments.length;i++){r=arguments[i];for(n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}return t},randomId:function(){return i()+i()+"-"+i()+"-"+i()+"-"+i()+"-"+i()+i()+i()}};e.exports=r},{}]},{},[44])(44)});